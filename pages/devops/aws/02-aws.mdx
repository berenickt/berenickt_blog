---
title: '02-AWS'
date: 2024/01/10
---

## 1. AWS 탄생

- 아마존: 세계 최대 온라인 전자상거래 회사
  - **막대한 규모의 인프라와 서버**를 필요했음
  - 자체 클라우드 컴퓨팅 인프라를 구축함
- 2004년 제 3자에게 서비스를 제공하기 위해 AWS(Amazon Web Services) 등장
  - cf. 첫 출시 서비스 : SQS(Simple Queue Service)
  - 분산형 메시지 큐 서비스로 소프트웨어 구성 요소 간에 어떤 볼륨의 메시지든
  - 전송, 저장 및 수신할 수 있게 해주는 서비스
- 2006년, S3와 EC2 출시

---

## 2. 왜 AWS인가?

(1) 클라우드 컴퓨팅 서비스의 선두주자임

(2) 고객 지향 서비스임

- e.g. AWS의 Snowball
- Snowball : 엄청 큰 데이터를 담는 가방
- 고객이 Snowball에 데이터를 직접 옮겨서 다시 AWS로 보내면 데이터를 이전해줌

---

(3) 글로벌 인프라임

- 전세계에 최대 규모의 인프라를 가지고 있다
- 31개의 리전과 99개 가용영역, 그리고 400개 이상의 엣지 로케이션이 있다.

> 💡 리전, 가용영역(AZ), 엣지 로케이션
>
> - `리전(Region)` : 서비스가 운영되는 지역, 복수 개의 데이터 센터들의 집합
> - `가용 영역(AZ, Availability Zone)` :
>   - 리전 내 위치한 복수 개의 데이터 센터들로 물리적으로 분리되어 있어,
>   - 고가용성/이중화 구성의 기본 요소가 됨
> - `엣지 로케이션(Edge Location)` :
>   - CloudFront같은 엣지 서비스의 캐시 서버가 운영되는 데이터 센터

---

(4) 가격 철학

> 💡 Amazon Flywheel
>
> ![아마존-철학](https://www.opinionnews.co.kr/news/photo/202102/46888_34469_4539.jpg)
>
> 아마존 핵심 철학 : 지구상의 가장 고객 중심적인 회사가 되자(To be earth’s most customer centric company)
>
> - 낮은 비용구조가 저가상품을 가능케 해 고객의 만족도를 높인다.
> - 이는 또 다른 고객을 불러 기업의 협상력을 높이고,
> - 우수한 공급사를 선정할 수 있게 돼 고객만족으로 이어진다.
> - 이 스케치엔 '이익'이란 단어는 없다.

AWS에서도 이 Flywheel이 적용된다.

- 많은 고객 유치해서 AWS를 많이 이용 → 더 많은 인프라 규모가 필요 → 규모의 경제가 발생
- 이로인해 인프라 비용이 절감되고, 가격 인하로 이어짐
- 가격이 인하되면 더 많은 고객이 찾아옴, 이 흐름이 반복됨
- 시간이 지날수록 AWS의 가격은 점점 내려감
- 그리고 사용자도 많으니, 가장 넓고 많은 파트너 생태계를 가지고 있음

cf. AWS Service Health Dashboard

- https://health.aws.amazon.com/health/home#/account/dashboard/open-issues
- AWS를 사용하다가 문제가 생겼을 때,
- 이 대시보드를 통해서 AWS의 문제인지 아니면,
- 내가 잘못 설정한 것인지 확인해 볼 수 있다.

---

## 3. AWS 소개

AWS에는 수 많은 서비스가 존재한다.

- 서비스 1개를 레고 블록이라 생각하고, 원하는대로 조립한다.
- 핵심 서비스 3가지 : EC2, RDS, S3

---

### 3.1 EC2

- Elastic Compute Cloud의 약자
- 가상 서버 서비스(Virtual Machine)
- 재구성이 가능한 컴퓨팅 리소스
- 쉡게 확장/축소된느 컴퓨팅 용량
- 용도에 따른 다양한 인스턴스 타입 제공
- 사용한 만큼만 과금(pay-as-you-go)

---

### 3.2 RDS

- Relational Database Service의 약자
- 완전 관리형 관계형 DB 서비스
- 다양한 DB 엔진 제공
- DB 이중화(Multi AZ)
- 읽기 전용 복제본(Read Replica)
- 인스턴스 확장

---

### 3.3 S3

- Simple Storage Service의 약자
- 객체 기반의 무제한 파일 저장 스토리지
- URL을 통해 손쉽게 파일 공유 가능
- 99%의 내구성
- 사용한 만큼만 지불(GB당 과금)
- 정적 웹사이트 호스팅 가능

---

### 3.4 AWS 사용 예시

- **EC2**를 서버, django 프레임워크와 MySQL 서버를 설치

  - DB를 직접 설치해서 사용하다 보면 관리하기가 힘든 부분이 생김

- **RDS**라는 완전 관리형 관계형 DB서비스를 사용해서 이렇게 DB를 별도로 분리

  - 이후 서버를 계속 운영하다보면 저장공간이 부족해짐

- 그래서 **EBS**라는 블록 스토리지를 계속해서 추가해서 사용

  - 하지만 용량이 필요할 때마다 계속해서 EBS를 추가하는 것은 번거로움

- **S3**라는 무제한 용량의 객체 기반 스토리지를 사용하도록 바꿈

  - EC2 인스턴스 하나로 서버를 운영하다 보면,
  - 장애가 생겼을 때 서비스가 중단될 수 있기 때문에,

- **ELB**라는 로드밸런서를 붙여서 이중화 작업을 함
  - 데이터베이스 또한 장애가 생길 것을 대비해서 DB 이중화 작업을 함
- 비동기 작업을 처리하기 위해서 **SQS**라는 분산형 메시지 큐 서비스를 추가
- 모바일앱 푸시 알림을 위해서 **SNS**라는 알림 서비스도 연동
- 비동기 작업이 계속 있는 것이 아니라 가끔 있기 때문에,
  - **Lambda**라는 서버리스 함수 서비스를 사용하도록 분리

AWS에서는 각 서비스들을 이렇게 하나씩 연동해나가는 과정을 통해서 나만의 인프라를 구축할 수 있다.

---

### 3.5 AWS 국내 고객 현황

- https://aws.amazon.com/ko/blogs/korea/how-aws-helps-our-customers-to-go-global-report-from-korea/

---

## 4. AWS 사용 사례

(1) 아모레퍼시픽

- cf. https://aws.amazon.com/ko/solutions/case-studies/amorepacific/
- AWS를 사용해서 개발한 데이터플랫폼의 아키텍처
- Kinesis, EMR, SNS, S3, Lambda 등 AWS의 여러가지 서비스들을 사용해서 구성

(2) 라인게임즈

- cf. https://aws.amazon.com/ko/solutions/case-studies/line-games/
- 라인게임즈에서 AWS를 사용해서 개발한 아키텍처
- 각 파트별로 필요한 서비스들을 사용해서 아키텍처를 구성

(3) 그 외

- Data Warehousing에서도 AWS를 사용해서 데이터를 저장하고 분석
- 모바일 앱의 백엔드를 위해서 AWS를 사용 가능
  - Cognito를 사용해서 회원 인증을 처리하고,
  - API Gateway와 Lambda를 사용해서 API 서버 만들 수 있음
- AI, Chatbot 등을 위해서도 AWS를 사용 가능

---

### 4.1 AWS 계산 청구서(Invoice)

- 청구서에는 한 달 동안 AWS의 각 서비스별로 얼만큼 과금이 되었는지가 나타나 있습니다.
- 이를 통해 어떤 서비스에서 요금이 많이 과금되는지를 확인하고, 비용 최적화 작업을 진행 가능

---

## 5. (실습) AWS 계정 생성

- AWS 계정은 가입한 이후 12개월 동안만 프리티어가 제공
- 공식사이트 : https://aws.amazon.com/ko/
- AWS에 가입

---

## 6. (실습) MFA 설정

- `MFA (Multi-Factor Authentication, 이중인증)`
  - 즉, **로그인할 때 비밀번호가 아닌 다른 장치를 이용해**서
  - **한 번 더 확인을 하는 절차를 추가**하는 것
  - MFA를 무조건 설정해야 하는 이유는 바로 해킹을 방지하기 위함
- AWS 계정에는 신용카드 정보가 연동되어 있기에 사용한 만큼 과금된다.
- AWS 측에 해킹당했다고 설명하면 돈을 내지 않을 수 있지만, 안 받아줄 수도 있다.
- AWS 루트 계정은 보안이 굉장히 중요하기 때문에 MFA를 꼭 설정!
- MFA를 위해 가장 많이 사용하는 것은 Google Authenticator 앱이 있다.
  - OTP, 즉 원타입 패스워드를 생성해주는 앱
  - 자신의 스마트폰에 이 앱을 다운로드 받는다. (Android, IOS 둘 다 있음)

---

### MFA 디바이스 할당

(1) AWS 맨 우측, 맨 위에서 [보안자격증명] 클릭

(2) 2번쨰 멀티 팩터 인증(MFA)에서 [MFA 디바이스 할당] 클릭

---

(2-1) [MFA 디바이스 선택] 화면

- 디바이스 이름 : 내가 식별할 수 있는 이름
- MFA device : Authenticator app

[다음] 클릭

---

(2-2) [디바이스 설정] 화면

- [QR 코드 표시] 클릭
- QR코드가 나오면, 아까 다운로드 받은 Google Authenticator 앱에서 스캔해서 추가
  - 추가한 이후에는 앱에서 일정 시간동안만,
  - 유효한 6자리 코드가 반복적으로 나온다.
- MFA 코드 1 : 첫번쨰 6자리 코드
- MFA 코드 2 : 시간이 지나 새롭게 생성된 6자리 코드

cf.) 6자리 코드를 3자리씩 나눠서 입력하는 것이 아니라, 6개 입력하고 시간이 지나고 새롭게 생성된 6자리 수를 입력하는 것임.

모두 입력하면 오른쪽 하단에 [MFA 추가] 버튼을 클릭해 MFA 디바이스를 등록한다.
