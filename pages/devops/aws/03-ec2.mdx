---
title: '03-EC2'
date: 2024/01/10
---

## 1. EC2

- Elastic Compute Cloud의 약자
- Virtual Machine을 인터넷을 통해 제공해주는 서비스
- 재구성이 가능한 컴퓨팅 리소스
- 쉡게 확장/축소된느 컴퓨팅 용량
- 용도에 따른 다양한 인스턴스 타입 제공
- 사용한 만큼만 과금(pay-as-you-go)

EC2는 컴퓨팅 리소스를 재구성이 가능하다는 특징을 갖고 있다,

- 즉, 인스턴스가 생성 된 이후에도 성능을 올리거나 내릴 수 있다는 의미
  - cf. `인스턴스` : EC2의 수량을 뜻하는 단위
  - EC2는 인스턴스 한 개, 인스턴스 두 개 이런식으로 표현한다.
  - 하나의 인스턴스는 가상 머신 하나를 의미한다
- 그래서 쉽게 컴퓨팅 용량을 확장하거나 축소할 수 있다
- EC2는 용도에 따른 다양한 인스턴스 타입을 제공한다.

---

### 1.1 EC2 인스턴스 패밀리 종류

EC2는 다양한 인스턴스 타입을 지원한다

- `M패밀리` : 컴퓨팅, 메모리, 네트워크 리소스를 균형적으로 사용할 수 있는 범용 인스턴스 타입
- `C패밀리` : EC2 내에서 최고 성능의 프로세서를 제공
- `R패밀리` : 메모리 용량이 많이 필요한 애플리케이션용
- `T패밀리` : 성능을 순간적으로 확장할 수 있는 인스턴스
  - 프리티어에서 제공되는 타입
  - AWS 계정을 생성하고 12개월 동안은 프리티어로 t2.micro 또는 t3.micro를 무료로 사용 가능
- `G패밀리`와 `P패밀리` : GPU 자원이 많이 필요한 애플리케이션을 위한 인스턴스용
- `I패밀리` : 높은 I/O를 제공하는 SSD 기반의 초고속 인스턴스 스토리지
- `D패밀리` : 높은 디스크 처리량, 단위단 최소의 가격인 인스턴스

모든 인스턴스 타입을 다 외울 필요는 없고, 필요할 때마다 맞는 타입을 찾아서 사용하면 됨

---

### 1.2 EC2 인스턴스의 구분

```
t3.large
```

- `t`는 **인스턴스 패밀리**를 의미
- `3`는 t패밀리의 3세대라는 뜻으로 **인스턴스 세대**를 의미
  - 인스턴스 세대는 높을 수 록 최신 세대를 의미, 최신일수록 비용대비 성능이 우수
- `large`는 **인스턴스의 사이즈**를 의미
  - micro, small, medium, large 등으로 나타내는데,
  - 이 사이즈가 한 단계 커질때마다 용량 및 가격이 두 배씩 증가

EC2 인스턴스는 생성 이후에도 인스턴스 타입, 세대, 사이즈 등의 사양을 변경할 수 있다.

---

### 1.3 EC2 인스턴스 타입 변경

그래서 만약 EC2 인스턴스 사양을 변경하고 싶다면,
먼저 인스턴스를 중지한 이후에 인스턴스 유형 변경 메뉴를 통해 사양을 변경할 수 있다.

---

### 1.4 EC2 과금 옵션 및 비용 최적화

- `On-Demand`
  - **약정없이 쓴 만큼만 지불**하는 요금제
  - 초기에 트래픽이 어느정도 나올지 예측하기 어려운 경우
  - 신규 서비스에서 자주 사용
- `Reserved Instance (RI)`
  - **인스턴스를 예약해서 사용**하는 요금제
  - RI를 사용하면 1년 혹은 3년 약정을 하고, 40~70%까지 할인
  - 항상 사용중인 안정화된 서버 자원을 위한 요금제
  - 적어도 **인스턴스를 1년 이상 유지할 계획이라면 무조건 RI를 사용**하는 것이 비용 측면에서 좋음
  - e.g. 인터넷을 쓸 때도 1년 혹은 3년 약정을 하면 요금을 할인해주는 것
- `Spot Instance`
  - AWS에서 **남는 자원을 경매 방식으로 입찰**받아서 아주 싼 값에 사용할 수 있게 해주는 요금제
  - 할인율이 거의 80~90%로 굉장히 높지만, 경매 방식을 사용하기 때문에 낙찰받지 못하면 사용할 수 없음
  - 단기적으로 수요가 많을 떄 유리

인스턴스가 꼭 필요한 경우에는 On-Demand나 Reserved Instance 요금제를 사용해야 하고,
가끔씩 있는 작업을 위해서는 Spot Instance를 사용한다.

---

### 1.5 EC2 과금 옵션에 따른 비용 비교

- On-Demand의 경우 한 달에 **약 60.74$**. 한화로 8만원 정도
- RI라고 부르는 Reserved Instance를 사용하게 되면,
  - 1년 약정하고 모두 한 번에 선결제 할 경우에는 **약 41% 저렴**하고,
  - 3년 약정하고 모두 한 번에 선결제 할 경우에는 **약 62% 저렴**하다.
- Spot Instance 요금제를 사용할 경우에는 평균적으로 약 70% 저렴하게 이용 가능
  - 경매 방식으로 낙찰 받아서 사용하는 방식이기 때문에,
  - 무조건 낙찰받을 수 없다는 점과 매번 가격이 달라질 수 있다는 단점이 존재
- cf. AWS EC2 공식 영상 : https://www.youtube.com/watch?v=TsRBftzZsQo

---

## 2. Elastic IP

- `Elastic`은 우리말로 **탄력적이다** 라는 뜻 (e.g. 고무줄이 탄력적이다.)
  - 탄력성은 **모양이 바뀌는 성질**을 의미
- 하지만 AWS에서 탄력적이다 라는 말은 **여기저기 붙였다 뗐다 할 수 있는 성질**을 의미
  - 여기서 붙인다는 것은 다른 AWS 서비스와 연동시킨다는 의미이고,
  - 떼는 것은 다른 AWS 서비스와 연동을 해제한다는 의미
- AWS의 서비스들의 이름에 이 Elastic이라는 단어가 들어가는 경우가 다 이런 의미이다.
  - AWS의 서비스명에 Elastic이라는 단어가 들어가면,
  - 다른 서비스와 유연하게 연동해서 사용 가능한 서비스라는 의미
- Elastic IP는 **Elastic IP address**를 줄여쓴 말
  - IP 주소를 줄여서 IP라고 부르는 것처럼,
  - Elastic IP도 뒤에 address를 생략하고 Elastic IP라고 부르는 것
  - `Elastic IP`는 **클라우드 컴퓨팅을 위해 고안된 정적 IPv4 주소**

![elastic-ip](https://raw.githubusercontent.com/berenickt/image-server/main/img/elastic-ip.jpeg)

Elastic IP는 AWS 계정과 연결된다. 그래서 각 계정 별로 할당 받을 수 있는 Elastic IP의 개수가 정해져 있다.

- `리전`은 AWS 서비스가 운영되는 지역을 의미
  - `리전` 안에는 복수 개의 `가용 영역`이 존재
  - `가용 영역`은 하나의 리전 내에 물리적으로 분리된 데이터 센터를 의미
- 각 `리전`에서 **AWS 계정과 연동 된 Elastic IP를 할당** 받을 수 있다.
  - 할당받은 `Elastic IP`를 `EC2 인스턴스`에 연결하면,
    - 해당 `IP주소`로 `EC2 인스턴스`에 접속할 수 있다.
  - `Elastic IP`는 IP주소이기 때문에 개수가 정해져 있다.
  - 그래서 사용자들이 무제한으로 사용할 수 있는 것은 아니기 때문에,
  - **모든 AWS 계정은 Elastic IP주소가 리전당 5개로 제한**되어 있다.

![elastic_ip-4](https://raw.githubusercontent.com/berenickt/image-server/main/img/elastic_ip-4.jpeg)

위 그림에서는 `Elastic IP`를 할당받아서 `EC2 인스턴스`에 연결했다.

- 클라이언트는 이 Elastic IP를 통해서 EC2 인스턴스에 접속한다.
- 그런데 만약 해당 `EC2 인스턴스`에 **장애가 발생**하게 되면, 서버가 정상적으로 작동하지 않는다.
- 이러한 경우 장애를 극복하기 위해서, 먼저 `새로운 EC2 인스턴스`를 하나 생성한다.
- `Elastic IP`를 `새로운 EC2` 인스턴스에 연결함으로써, 서버가 정상 작동할 수 있도록 만들어준다.

이렇게 Elastic IP를 사용하면 **클라이언트에서 접속하는 IP주소의 변경없이 서버의 장애를 극복**할 수 있다.
만약 Elastic IP가 없었다면, 새로운 EC2 인스턴스의 IP를 클라이언트에 반영해줘야 한다.

그리고 `Elastic IP`를 사용할 때 **한 가지 유의해야 할 점**이 있다.

- `Elastic IP`는 **인스턴스에 연결해두면 무료로 사용**할 수 있지만,
- 그렇지 않고 **아무 인스턴스에도 연결해두지 않으면 시간당 $0.005가 과금**된다.
- Elastic IP는 무한한 자원이 아니기 때문에, 각 AWS계정에 대해 리전당 5개로 개수가 제한되어 있다.
- 그래서 할당만 받고 사용하지 않는 Elastic IP들이 생기지 않도록, 과금을 하는 것이다

---

## 3. Security Group

`Security Group(보안 그룹)`

- 의미 그대로 보안을 위해 사용되는 개념
- 보안 그룹은 **하나 이상의 인스턴스에 대한 트래픽을 제어하는 가상의 방화벽** 역할

`방화벽(Firewall)`

- 컴퓨터의 보안을 위해 외부에서 내부 또는 내부에서 외부의 정보통신망에 접근하는 것을
  - 허용하거나 차단하기 위한 시스템
- AWS에서 이러한 방화벽의 역할을 하는 것이 Security Group이다.

---

### 3.1 Security Group 작동 방식

![security_group](https://raw.githubusercontent.com/berenickt/image-server/main/img/security_group.jpeg)

- `Inbound 트래픽` : 서버의 입장에서 안으로 들어오는 트래픽
- `Outbound 트래픽` : 서버의 밖으로 나가는 트래픽

Security Group은 서버와 클라이언트 사이에서 Inbound와 Outbound 트래픽을 허용하거나 차단한다.

- e.g. 인바운드 규칙에 등록되어 있으면,

  - 들어오는 트래픽을 허용하고, 그렇지 않으면 막힌다.

- e.g. 반대로 아웃바운드 규칙에 등록되어 있으면,
  - 나가는 트래픽을 허용하고, 그렇지 않으면 막힌다.

하나의 Security Group에는 보안 규칙이 여러개 등록될 수 있다.

- 이러한 **규칙들 중 하나라도 만족할 경우에는 트래픽이 허용**된다.
- 또한 여러 개의 EC2 인스턴스가 하나의 Security Group과 연동될 수도 있다.

보안 그룹에서 중요한 점은 **기본적으로 보안그룹은 모든 아웃바운드 트래픽을 허용**한다.

- 이 말은 서버의 입장에서 밖으로 나가는 트래픽은 기본적으로 모두 허용한다는 의미
- 쉽게 말해, 들어올 때는 검사를 하지만, 나갈 때는 신경쓰지 않는다.

그리고 또 한 가지 보안 그룹에서 중요한 점은 **보안 그룹 규칙은 항상 허용적**이다.

- 그래서 **액세스를 거부하는 규칙을 생성할 수 없다.**
- e.g. "특정 IP주소에서 서버의 3000번 포트로 접속하는 것을 허용하겠다." 라고 규칙을 작성할 수는 있지만,
- e.g. "특정 IP주소에서 서버의 3000번 포트로 접속하는 것을 허용하지 않겠다."처럼 액세스를 거부하는 형태로 규칙을 작성할 수 없다.

![inbound-outbound](https://raw.githubusercontent.com/berenickt/image-server/main/img/inbound-outbound.png)

[EC2] → [보안그룹] → [자기 보안그룹ID]를 클릭해보면, 인바운드 규칙과 아웃바운드 규칙이 각각 탭으로 분리되어 있는 것을 볼 수 있으며, 여기에 허용할 규칙들을 작성하면 된다.

- 보안 그룹에는 언제든지 규칙을 추가하고 제거할 수 있다.
- 그리고 이렇게 변경된 규칙은 **보안 그룹과 연결된 인스턴스에 자동으로 적용**된다.

또한 여러 보안 그룹을 하나의 인스턴스에 연결할 수도 있다.

- 이렇게 할 경우 각 보안 그룹의 규칙이 유효하게 결합된 단일 규칙 세트가 생성된다.
- 그리고 이 규칙 세트를 사용하여 액세스를 허용할지 여부를 결정한다.
- 쉽게 말해, **인스턴스에 연결된 모든 보안 그룹의 합집합이 적용된다**

---

## 4. (실습) EC2 인스턴스 생성

오른쪽 맨위 리전 위치를 아시아(서울)로 변경

[EC2] → 주황색 [인스턴스 시작] 버튼 클릭

- `이름 및 태그` : 서버의 별명을 지은 뒤에 [추가 태그 추가] 클릭
  - 그러면 이름이 태그 형태로 추가된다.
  - cf. 태그별로 요금 확인 가능!
- `Application and OS Images`
  - Ubuntu Linux를 선택
  - Amazon Machine Image(AMI)로는 프리티어로 제공하는 Ubuntu 22.04 LTS를 선택
  - cf. 서버에 설치할 운영체제 선택하는 부분
- `인스턴스 유형`
  - 프리티어 사용유형인 t2.micro를 선택
- `키 페어(로그인)`
  - [새 키 페어 생성] 클릭
  - cf. 키를 모르거나 잃어버리게 되면 인스턴스에 다시는 접속할 수 없기 때문에 잘 설정하고 관리해야 한다.

> `키 페어 생성`
>
> - 이름 : 키페어 이름
> - 키 페어 유형 : RSA
> - 프라이빗 키 파일 형식 : 맥이면, `.pem` 선택
>   - window면, `.ppk` 선택
>   - cf. 나중에 변경가능함
> - [키 페어 생성]
>
> 그러면 새로운 키페어가 생성되고, 자동으로 로컬에 키파일이 다운로드된다.
>
> cf. 기억해야 할 부분은 키파일은 키 쌍을 생성할 때 이외에는 다운로드 받을 수 없다.
>
> - 키라는 것은 내가 만든 서버에 접속할 수 있는 권한을 의미
> - 그렇기 때문에 키파일이 다른 사람에게 유출되면,
>   - 그 사람이 내 서버에 접속할 수 있게 된다.
> - 그래서 키파일은 키를 생성하는 시점에만 다운로드 받을 수 있으며,
> - 다운받은 파일은 각자가 잘 관리해야 한다.

- `네트워크 설정` - 보안 그룹을 설정하는 부분
  - Secure Shell이라 불리는 SSH를 통해 접속할 것이기 때문에,
  - SSH 트래픽 허용을 체크 표시
  - 오른쪽에 [위치 무관]이라고 써있는 부분은 어느 IP 주소에서든지 SSH로 접속하는 것을 의미
- `스토리지 구성` - 서버에서 사용할 저장 장치를 선택하는 단계
  - 기본 설정되어 있는 8GB GP2 루트 볼륨을 그대로 사용

모든 설정을 마쳤으면, 오른쪽 하단 주황색 [인스턴스 시작] 버튼을 클릭

- 그럼 진행 상황이 쭉 표시되면서 인스턴스가 시작된다.
- [모든 인스턴스 보기]를 클릭해 인스턴스 상세 정보화면으로 이동한다.
- 인스턴스 상태가 초록색 [실행중]이라고 나와야 정상 사용가능하다.

---

## 5. (실습) SSH로 EC2 인스턴스 접속

> 💡 Window에서 접속할 경우에는 Putty 설치가 필요
>
> cf. https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/putty.html

EC2 인스턴스를 체크해서 누르면, 하단에 상세 정보가 나온다.

- 먼저 [퍼블릭 IPv4 주소]를 복사한다.
- Linux 또는 MacOS에서 터미널을 실행한다.

이제부터 각자의 터미널 창에 환경에 맞게 설정한다.

```bash
$ ssh -i [다운받은 keypair경로] ubuntu@[복사한 퍼블릭 IPv4 주소]

? yes
```

- ssh-i 옵션은 identity 파일을 의미하는 옵션
  - 앞에서 EC2를 생성할 때 만든 keypair 파일을 이 옵션을 통해 넣어주는 것
- 서버에 접속할 때 서버의 주소뿐만 아니라,
  - 서버에 접속할 수 있는 권한인 키를 함께 넣어주는 것
- 여기서 ubuntu는 사용자 이름을 의미하는데,
  - EC2를 생성할 때 선택한 ubuntu 이미지의
  - 기본 사용자 이름이 ubuntu로 정해져 있기 때문에 이렇게 한 것이다.

yes를 입력하면 접속에 실패하는데,

- 이는 에러 메시지에 있는 것처럼 키파일의 권한이 너무 오픈되어 있기 때문.
- 키파일을 가진 사람은 서버에 접속할 수 있기 때문에,
- 이 키파일의 권한 자체도 최소한으로 설정해야 한다.

```bash
$ ls -al [다운받은 keypair경로]
-rw-r--r--@ ~~~~~~~~~~~~
```

ls명령어를 사용해서 키파일의 권한을 확인해보면,

- 사용자, 그룹, 나머지의 권한이 나온다.
- cf. `r(read)`은 4, `w(write)`은 2, `x(execute)`는 1의 숫자로 나타낼 수 있음
- `-rw-r--r--`는 파일소유자가 아닌 다른 사용자도 키파일을 읽을 수 있는 상태
- 그래서 키파일의 권한을 사용자만 읽거나 쓸 수 있도록 변경해야 한다.

```bash
$ chmod 600 [다운받은 keypair경로]
$ ls -al [다운받은 keypair경로]
-rw-------@ ~~~~~~~~~~~
```

chmod 명령어를 사용해, 사용자만 키파일을 읽고 쓸 수 있도록 한다.

- `chmod 600`에 뒤에 3자리 숫자는 각 자리의 권한을 의미한다.
- 사용자에게만 `6(4+2, 즉 읽기와 쓰기)` 권한을 주고,
- 그룹, 나머지에는 아무 권한을 주지 않는다.
- 권한을 변경한 뒤, 다시 확인해보자.

```bash
$ ssh -i [다운받은 keypair경로] ubuntu@[복사한 퍼블릭 IPv4 주소]
ubuntu@ip-이름:~$
```

이후에 다시 SSH 명령어를 실행하면, 정상적으로 EC2 인스턴스에 접속된다.

---

## 6. (실습) Elastic IP 주소 사용

[EC2] → 왼쪽 메뉴 [네트워크 및 보안]의 [탄력적 IP] 클릭

- 오른쪽 상단 주황색 [탄력적 IP 주소 할당] 클릭
- 별도 설정없이 아래로 스크롤해서 [할당] 버튼 클릭

이제 이 Elastic IP를 EC2 인스턴스에 연결할 것이다.

- 오른쪽 상단의 [작업] 메뉴를 클릭
- 그리고 나오는 하위 메뉴 중에서 [탄력적 IP 주소 연결]을 클릭
- 여기서 [인스턴스 선택] 입력 양식을 누른다.
  - 그러면 현재 실행 중인 EC2 인스턴스 목록이 나온다.
  - 지금 실행 중인 EC2 인스턴스가 하나밖에 없기 때문에 하나만 나오는 것
- 이 인스턴스를 선택
- 그리고 화면 제일 하단에 있는 연결 버튼을 클릭

제대로 연결되었는지 확인해보기 위해서

- 왼쪽에 인스턴스 메뉴를 클릭해서 [인스턴스] 페이지로 이동
- 해당 EC2 인스턴스를 선택 후, 상세 정보 오른쪽 하단에 [탄력적 IP 주소]가 잘 나온다.

이번에는 이 탄력적 IP 주소를 복사해서 SSH로 접속해본다.

- [탄력적 IP 주소]를 복사
- 복사한 IP 주소를 사용해 동일하게 SSH로 접속한다.

```bash
$ ssh -i [다운받은 keypair경로] ubuntu@[탄력적 IP 주소]
? yes
ubuntu@ip-이름:~$
```

그러면 정상적으로 서버에 접속이 되는 것을 볼 수 있다.

(cf. 참고로 빠져나오려면 터미널창에 `exit`를 입력하면 된다.)

---

### 6.1 Elastic IP와 EC2 인스턴스의 연결 해제

이제 Elastic IP 주소와 EC2 인스턴스의 연결을 해제한다.

- 해당 인스턴스 상세 정보에서 [탄력적 IP 주소]의 링크를 클릭
- 그러면 Elastic IP의 상세 정보 화면이 나온다.
- 오른쪽 위에 있는 [작업] 메뉴를 클릭
- 그리고 나오는 하위 메뉴에서 [탄력적 IP 주소 연결 해제]를 클릭
  - 한 번 더 확인하기 위한 다이얼로그가 나오고,
  - 여기서 [연결 해제] 버튼을 누르면 연결 해제된다.

---

### 6.2 Elastic IP 주소 반납⭐️

이번에는 Elastic IP 주소를 반납하기 위해서 다시 한 번 [작업] 메뉴를 누른다.

- [탄력적 IP 주소 릴리스] 메뉴를 클릭
- 반납할 탄력적 IP 주소를 확인한 뒤에 [릴리스] 버튼을 누른다.

그러면 이렇게 할당받았던 탄력적 IP가 정상적으로 반납된다.

- Elastic IP는 인스턴스에 연결해두면 무료이고,
- 그 외에는 시간당 0.005달러 과금되기 때문에,
- 인스턴스에 연결하지 않을 것이라면, 반드시 반납하자!

---

## 7. (실습) 보안 규칙 추가/삭제

### 7.1 보안 규칙 추가

[EC2] → 왼쪽 메뉴 [네트워크 및 보안]의 [보안 그룹] 클릭

- 아무 보안 그룹이나 하나 누르면, 하단에 이렇게 상세 정보가 나온다.
- [인바운드 규칙] 탭을 누르고, 오른쪽에 나오는 [인바운드 규칙 편집] 버튼을 클릭

---

(인바운드 규칙 편집) 페이지

- [규칙 추가] 버튼을 누릅니다.
- 보안 규칙의 유형을 선택하기 위해서 [유형 메뉴]를 클릭.
  - 기본으로 선택되어 있는 사용자 지정 TCP를 선택.
- 포트 범위 : 8000 (서버에서 사용하는 포트 번호)
- 소스 : Anywhere IPv4
  - 모든 IP에서 접속할 수 있도록 Anywhere IPv4를 선택
  - (인바운드 규칙에서의 소스는 서버에 들어오는 트래픽을 의미)
- 설명 - 선택사항 : Custom Port
  - 각 규칙에 대한 설명을 적어두면 나중에 다 이 규칙을 무엇인지 파악 가능

다 적었다면, [규칙 저장] 버튼을 눌러서 규칙을 저장한다.

---

### 7.2 보안 규칙 삭제

[EC2] → 왼쪽 메뉴 [네트워크 및 보안]의 [보안 그룹] 클릭

- 아무 보안 그룹이나 하나 누르면, 하단에 이렇게 상세 정보가 나온다.
- [인바운드 규칙] 탭을 누르고, 오른쪽에 나오는 [인바운드 규칙 편집] 버튼을 클릭
- 그리고 아까 추가한 규칙을 [삭제] 버튼을 눌러서 삭제해준다.
- 규칙을 삭제한 이후에 [규칙 저장] 버튼을 눌러서 규칙을 저장한다.

---

## 8. (실습) EC2 인스턴스 종료

> EC2 인스턴스는 삭제가 없다! ⭐️
>
> 삭제가 없으며 종료를 하게 되면, 일정 시간이 지난 이후에 자동으로 삭제된다.

[EC2] → 왼쪽 메뉴 [인스턴스]의 [인스턴스] 클릭

- EC2 인스턴스 페이지에서 종료할 인스턴스를 선택
- 오른쪽 위에 [인스턴스 상태] 메뉴를 클릭
  - 하위 메뉴가 나오는데, [인스턴스 종료] 메뉴를 클릭.
  - 그러면 한 번 더 확인하기 위한 다이얼로그가 나온다.
  - 여기서 [종료] 버튼을 클릭합니다.
- 그러면 이렇게 인스턴스의 상태가 [종료 중]으로 바뀐다.
  - 일정 시간이 지나면, 인스턴스의 상태가 [종료됨]으로 바뀐다.
  - 종료된 상태에서 일정 시간이 지나면 자동으로 목록에서 삭제된다.

AWS 같은 클라우드 서비스를 사용할 때, 주의할 점

- 클라우드는 사용한 만큼 요금을 내기때문에,
- 사용하지 않는 자원은 바로 제거한다.
