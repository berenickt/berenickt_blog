---
title: '09-Jest-Expo'
date: 2024/01/10
---

## 1. 테스트

- 에러를 사전에 검사하기 위한 것
- 동작이 이전과 다른것이 있는지 검사하는 것
- 사전 검증을 통하여 안정성 있는 앱을 전달 하기 위함

---

### 1.1 Static Analysis

- 코드 상에서 있는 문제를 바로 알아 낼 수 있는 것
- Type Checking (Typescript, Flow 등)
- Lint (ESLint)
- 가장 쉽게 접근 할 수 있는 방법
- 저비용 고효율

---

### 1.2 Testable code

- 코드를 각각 단위에 맞게 쪼개는것
- 잘게 쪼갤 수록 더 테스트가 쉬워짐
- 비즈니스 로직, App State, 컴포넌트등의 단위로 분리

---

### 1.3 Structuring Test

- 테스트 작성시 명확하게 어떤 테스트인지를 전달하기 위함
- 구조화된 테스트문은 모두가 테스트의 요구사항을 파악하기 쉬워짐
  - `Given` : 어떤 조건의 테스트 인지?
  - `When` : 어떤 함수 또는 행동에 의해서 발생하는것 인지?
  - `Then` : 어떠한 결과값이 나와야 하는지
- 과거에 좋아요 누른 기록 없이 좋아요를 할때 좋아요가 올라간다

---

### 1.4 Unit Test

- 가장 작은 단위에 대한 테스트
- 쉽고 빠르게 작성 할 수 있고 바로 실행하여 검증 가능
- function 또는 class 등에 적용
- 작은단위로만 테스트 하기 때문에, 합쳐졌을때 동작이 달라 질 수도 있음

---

### 1.5 Integration Test

- 통합 테스트, 유닛테스트들과 함께 통합해서 테스트 하는것
- 각각의 유닛 테스트 결과들을 섞어 테스트 결과값을 정하게 됨

---

### 1.6 Component Test

- 컴포넌트 자체에 대한 검증을 진행
- `Interaction Test` : 버튼이 눌리는지, 혹은 disable되었을때 눌리지 않느지 등에 대한 검증
- `Snapshot Test` : 이전에 render 되던 것과 지금 render되는것이 같은지 검증

---

### 1.7 E2E Test (End to End Test)

- 실제로 돌아가는 앱에서 지정된 스크립트대로 반복 하는 것
- 실제로 로그인 플로우등 잘 변하지 않는 화면에 대해서는 테스트 가능
- 실제 핸드폰과 연동하여 테스트 가능
- Detox, Appium등 오픈소스로 되어있음

---

## 2. Jest

- Javascript Unit Test Framework
- 자바스크립트에서 유닛테스트를 만들때 가장 범용적으로 사용 됨
- Meta에서 개발
- 기본 테스트 구조

```js
test('What to Test it', () => {
  expect(1 + 1).toBe(2)
})
```

---

## 3. Expo로 스토어 업로드 및 운영

### 3.1 환경분리

- 디버깅, 프로덕션을 위한 앱 등 사용하는 Config들을 분리 하는것
- 코드레벨에서도 할 수 있지만 휴먼에러의 발생 가능성이 높음
- 어떤 API로 보낼지, DB는 어디를 접근할지 등을 나눠둠

---

### 3.2 OTA Update 란 ?

- 스토어를 통하지 않고 바로 사용자들이 사용 할 수 있도록 하는 업데이트
- Over the air Update의 약자
- App Update 란? 빌드 완료 → 스토어 검수 → 사용자에게 전달
- `OTA Update` : 빌드 완료 된 뒤 바로 사용자에게 전달됨
- OTA Update 제한점
  - 업데이트가 Javascript, Typescript영역에서만 가능

---

## 4. Expo의 한계점

(1) Expo SDK 미지원시 불편함

- 지원하지 않는 SDK를 사용하면 eject 해서 사용 해야 함
- 카카오 로그인, 네이버 로그인 등 네이티브 모듈을 사용할때 발생

(2) EAS Build System의 빌드 시간

- 빌드를 걸어두게 되면 EAS에서 빌드가 진행됨
- 클라우드 리소스를 사용하다보니 아무래도 대기 시간이 필요
- 빌드서버 구축, 유료 플랜을 사용하지 않는다면 발생 (주로 15~20분 사이)

(3) 빌드 결과물의 Size

- 빌드 결과물의 용량이 큰편 (20MB 이상)
- Expo SDK에 해당하는것들이 모두 들어가기 때문
