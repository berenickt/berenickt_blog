---
title: '14-ë‹¤ì–‘í•œ Hooks'
date: 2022/12/22
---

# 1. Common Hooks (Hooks ì¢…ë¥˜)

- ReactëŠ” ë” íš¨ìœ¨ì ì¸ React ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ë§ì€ Hooksë¥¼ ì§€ì›í•¨
- [React Hooks Reference](https://reactjs.org/docs/hooks-reference.html#usereducer)
  - Basic Hooks (useState, useEffect) â†’ 09ì—ì„œ ë‹¤ë£¸
  - useRef â†’ 10ì—ì„œ ë‹¤ë£¸
  - useContext & Context API
  - useMemo
  - useCallback
  - useReducer...
  - Custom Hook ë§Œë“¤ê¸°

---

# 2. useContext & Context API

Reactë¡œ ë§Œë“  ì•±ì€ ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

![React_14_1](https://raw.githubusercontent.com/berenickt/image-server/main/img/React_14_1.png)

- ìµœìƒìœ„ App ì»´í¬ë„ŒíŠ¸
- ê·¸ ì•„ë˜ Tree í˜•íƒœë¡œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ êµ¬ì„±ë˜ë©°, ë°ì´í„° íë¦„ì€ ìœ„ì—ì„œ ì•„ë˜ë¡œ
- ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ **propë¥¼ í†µí•´ ë°ì´í„°ê°€ ì „ë‹¬**ë¨

```jsx
// App ì»´í¬ë„ŒíŠ¸
<Header user={user} />

// ---------------------------
// Header ì»´í¬ë„ŒíŠ¸
<SearchBar user={user} />
```

![React_14_2](https://raw.githubusercontent.com/berenickt/image-server/main/img/React_14_2.png)

ê·¸ëŸ¬ë‹¤ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì „ì—­ì ì¸ ë°ì´í„°ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (e.g. í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´, í…Œë§ˆ, ì–¸ì–´)
propsë¡œ ì¼ì¼íˆ ë‹¨ê³„ë³„ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì—¬ í•œë‹¤ë©´, ë§¤ìš° ê³ í†µìŠ¤ëŸ¬ìš¸ ê²ë‹ˆë‹¤. (ì´ë¥¼ `Prop Drilling`ì´ë¼ê³  í•¨)
ì½”ë“œë„ ë³µì¡í•´ì§€ê³ , ë­ í•˜ë‚˜ ë°”ë€Œë©´ ì¼ì¼íˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ì•„ê°€ì„œ ìˆ˜ì •í•´ì¤˜ì•¼ í•  ê²ë‹ˆë‹¤.

---

## 2.1 Context API

![React_14_3](https://raw.githubusercontent.com/berenickt/image-server/main/img/React_14_3.png)

ReactëŠ” Contextë¥¼ ì œê³µí•˜ë©´ì„œ ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•´ì¤ë‹ˆë‹¤.

- Context = ì•± ì•ˆì—ì„œ ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë“¤ì„ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¼ë¦¬ ì‰½ê²Œ ê³µìœ í•˜ëŠ” ë°©ë²•ì„ ì œê³µ
- ë§¨ ì•„ë˜ C, E ì»´í¬ë„ŒíŠ¸ì—ë§Œ ë°ì´í„°ê°€ í•„ìš”í•˜ë©´, `useContext` ì‚¬ìš©í•˜ë©´ ë¨
- `ContextëŠ” ê¼­ í•„ìš”í•  ë–„ë§Œ ì‚¬ìš©!`
  - Contextë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›Œ ì§ˆ ìˆ˜ ìˆìŒ
  - Prop Drillingì„ í”¼í•˜ê¸° ìœ„í•œ ëª©ì ì´ë¼ë©´, `Component Composition(ì»´í¬ë„ŒíŠ¸ í•©ì„±)`ì„ ë¨¼ì € ê³ ë ¤

---

## 2.2 ì˜ˆì œ1 : Context ì‚¬ìš© ì „

### 2.2.1 í´ë”êµ¬ì¡°

```sh
ğŸ“¦ src
â”œâ”€Â components
â”‚Â Â â”œâ”€Â Content.jsx
â”‚Â Â â”œâ”€Â Footer.jsx
â”‚Â Â â”œâ”€Â Header.jsx
â”‚Â Â â””â”€Â Page.jsx
â”œâ”€Â App.css
â””â”€Â App.js
```

---

### 2.2.2 Content.jsx

```jsx
import React from 'react'

export default function Content({ isDark }) {
  return (
    <div
      className="content"
      style={{
        backgroundColor: isDark ? 'black' : 'lightgray',
        color: isDark ? 'white' : 'black',
      }}
    >
      <p>ë©”ì‹œë‹˜, ì•ˆë…•í•˜ì„¸ìš”!</p>
    </div>
  )
}
```

---

### 2.2.3 Footer.jsx

```jsx
import React from 'react'

export default function Footer({ isDark, setIsDark }) {
  const toggleTheme = () => {
    setIsDark(!isDark)
  }
  return (
    <footer className="footer" style={{ backgroundColor: isDark ? 'black' : 'lightgray' }}>
      <button className="button" onClick={toggleTheme}>
        Dark Mode
      </button>
    </footer>
  )
}
```

---

### 2.2.4 Header.jsx

```jsx
import React from 'react'

export default function Header({ isDark }) {
  return (
    <header
      className="header"
      style={{
        backgroundColor: isDark ? 'black' : 'lightgray',
        color: isDark ? 'white' : 'black',
      }}
    >
      <h1>Welcom ë©”ì‹œ!</h1>
    </header>
  )
}
```

---

### 2.2.5 Page.jsx

```jsx
import React from 'react'
import Header from './Header'
import Content from './Content'
import Footer from './Footer'

export default function Page({ isDark, setIsDark }) {
  return (
    <div className="page">
      <Header isDark={isDark} />
      <Content isDark={isDark} />
      <Footer isDark={isDark} setIsDark={setIsDark} />
    </div>
  )
}
```

---

### 2.2.6 App.css

```css
* {
  box-sizing: border-box;
  margin: 0;
  font-family: sans-serif;
}

.page {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

.header {
  width: 100%;
  height: 80px;
  border-bottom: 2px solid gray;
  display: flex;
  justify-content: center;
  align-items: center;
}

.content {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 30px;
}

.footer {
  width: 100%;
  height: 80px;
  border-top: 2px solid gray;
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.button {
  padding: 10px;
  margin-right: 30px;
}
```

---

### 2.2.7 App.js

```jsx
import React, { useState } from 'react'
import './App.css'
import Page from './components/Page'

function App() {
  const [isDark, setIsDark] = useState(false)

  return <Page isDark={isDark} setIsDark={setIsDark} />
}

export default App
```

---

## 2.3 ì˜ˆì œ1 : Context ì‚¬ìš© í›„

### 2.3.1 í´ë” êµ¬ì¡°

```sh
ğŸ“¦ src
â”œâ”€Â components
â”‚Â Â â”œâ”€Â Content.jsx
â”‚Â Â â”œâ”€Â Footer.jsx
â”‚Â Â â”œâ”€Â Header.jsx
â”‚Â Â â””â”€Â Page.jsx
â”œâ”€Â context # ì¶”ê°€
â”‚Â Â â”œâ”€Â ThemeContext.jsx
â”‚Â Â â””â”€Â UserContext.jsx
â”œâ”€Â App.css
â””â”€Â App.js
```

### 2.3.2 Context

```jsx
// ThemeContext.jsx
import { createContext } from 'react'

export const ThemeContext = createContext(null)

// -------------------------------------------------------
// UserContext.jsx
import { createContext } from 'react'

export const UserContext = createContext(null)
```

### 2.3.3 Context ì ìš© : App.js

```jsx
import { ThemeContext } from './context/ThemeContext'
import { UserContext } from './context/UserContext'

export default function App() {
  const [isDark, setIsDark] = useState(false)

  return (
    // ëª¨ë“  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— valueì˜ ê°’ì„ ì „ë‹¬
    <UserContext.Provider value={'ì‚¬ìš©ì'}>
      <ThemeContext.Provider value={{ isDark, setIsDark }}>
        <Page />
      </ThemeContext.Provider>
    </UserContext.Provider>
  )
}
```

---

### 2.3.4 Context ì ìš© : componentsë“¤

```jsx
export default function Content() {
  const { isDark } = useContext(ThemeContext)
  const user = useContext(UserContext)

  return (
    <div
      className="content"
      style={{
        backgroundColor: isDark ? 'black' : 'lightgray',
        color: isDark ? 'white' : 'black',
      }}
    >
      <p>{user}ë‹˜, ì•ˆë…•í•˜ì„¸ìš”!</p>
    </div>
  )
}
```

```jsx
export default function Footer() {
  const { isDark, setIsDark } = useContext(ThemeContext)

  const toggleTheme = () => {
    setIsDark(!isDark)
  }

  return (
    <footer className="footer" style={{ backgroundColor: isDark ? 'black' : 'lightgray' }}>
      <button className="button" onClick={toggleTheme}>
        Dark Mode
      </button>
    </footer>
  )
}
```

```jsx
export default function Header() {
  const { isDark } = useContext(ThemeContext)
  const user = useContext(UserContext)

  // console.log(user);

  return (
    <header
      className="header"
      style={{
        backgroundColor: isDark ? 'black' : 'lightgray',
        color: isDark ? 'white' : 'black',
      }}
    >
      <h1>Welcom {user}!</h1>
    </header>
  )
}
```

```jsx
export default function Page() {
  return (
    <div className="page">
      <Header />
      <Content />
      <Footer />
    </div>
  )
}
```

---

# 3. useMemo

ì»´í¬ë„ŒíŠ¸ì˜ ì„±ëŠ¥ ìµœì í™”(Optimization)ì— ì‚¬ìš©ë˜ëŠ” ëŒ€í‘œì ì¸ Hookì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- useMemo
- useCallback

---

## 3.1 ê°œë…

useMemoì—ì„œ `memo`ëŠ” Memoization(ë©”ëª¨ì´ì œì´ì…˜)ì„ ì˜ë¯¸

- `Memoization`
  - ë™ì¼í•œ ê°’ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œí•´ì•¼ í•œë‹¤ë©´,
  - ë§¨ ì²˜ìŒ ê°’ì„ ê³„ì‚°í•  ë–„, í•´ë‹¹ ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì„œ, í•„ìš”í•  ë•Œë§ˆë‹¤ ë˜ ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šê³ 
  - **ë©”ëª¨ë¦¬ì—ì„œ êº¼ë‚´ì„œ ì¬ì‚¬ìš©**ì„ í•˜ëŠ” ê¸°ë²•
  - ì‰½ê²Œ ë§í•´, **ìì£¼ ì‚¬ìš©í•˜ëŠ” ê°’ì„ ìºì‹±ì„ í•´ë‘¬ì„œ ê·¸ ê°’ì´ í•„ìš”í•  ë–„ë§ˆë‹¤ ë‹¤ì‹œ ê³„ì‚°í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ êº¼ë‚´ì„œ ì“°ëŠ” ê²ƒ**

### 3.1.1 í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ ë¬¸ì œì 

ë Œë”ë§ ë  ë•Œë§ˆë‹¤, Component í•¨ìˆ˜ë¥¼ í˜¸ì¶œ â†’ ëª¨ë“  ë‚´ë¶€ ë³€ìˆ˜ ì´ˆê¸°í™”

```jsx
function Component() {
  const value = calculate() // ë Œë”ë§ë  ë–„ë§ˆë‹¤, calculateê°€ ë°˜ë³µí˜¸ì¶œë¨ -> ì„±ëŠ¥ì´ ëŠë ¤ì§(ë¹„íš¨ìœ¨ì )
  return <div>{value}</div>
}

function calculate() {
  return 10
}
```

useMemoë¥¼ ì‚¬ìš©í•˜ë©´, ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ë Œë”ë§ â†’ `Component í•¨ìˆ˜ í˜¸ì¶œ, Memoization` â†’ ë Œë”ë§ â†’ `Component í•¨ìˆ˜ í˜¸ì¶œ, Memoizeëœ ê°’ì„ ì¬ì‚¬ìš©`

```jsx
// ë Œë”ë§
function Component() {
  const value = useMemo(() => calculate(), [])
  return <div>{value}</div>
}

function calculate() {
  return 10
}
```

---

### 3.1.2 useMemo êµ¬ì¡°

```jsx
// useMemo(ì½œë°±í•¨ìˆ˜, ì˜ì¡´ì„±ë°°ì—´)
// - ì½œë°±í•¨ìˆ˜ : ë©”ëª¨ì´ì œì´ì…˜í•´ì„œ ë¦¬í„´í•´ì¤„ í•¨ìˆ˜
// - ì˜ì¡´ì„± ë°°ì—´ : ìš”ì†Œì˜ ê°’ì´ ì—…ë°ì´íŠ¸ë  ë–„ë§Œ ì½œë°±í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ í˜¸ì¶œ
// -- ë©”ëª¨ì´ì œì´ì…˜ëœ ê°’ì„ ì—…ë°ì´íŠ¸í•´ì„œ ë‹¤ì‹œ ë©”ëª¨ì´ì œì´ì…˜í•´ì¤Œ
// -- ë¹ˆ ë°°ì—´ì„ ë„˜ê²¨ì£¼ë©´, ì»´í¬ë„ŒíŠ¸ê°€ mountë˜ì—ˆì„ ë•Œë§Œ ê°’ì„ ê³„ì‚°í•˜ê³ , ì´í›„ì—ëŠ” í•­ìƒ ë©”ëª¨ì´ì œì´ì…˜ëœ ê°’ì„ êº¼ë‚´ì”€
const value = useMemo(() => {
  return calculate()
}, [item])
```

useMemo ì—­ì‹œ ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©í•˜ë©´, ì˜¤íˆë ¤ ì„±ëŠ¥ì— ë¬´ë¦¬ê°€ ê°‘ë‹ˆë‹¤. ê¼­ í•„ìš”í•  ë–„ë§Œ ì”ì‹œë‹¤.
useMemoë¥¼ ì“´ë‹¤ëŠ” ê±´, ê°’ì„ ì¬í™œìš©í•˜ê¸° ìœ„í•´, ë”°ë¡œ ë©”ëª¨ë¦¬ë¥¼ ì†Œë¹„í•´ì„œ ì €ì¥í•´ë†“ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì—,
ë¶ˆí•„ìš”í•œ ê°’ê¹Œì§€ ë©”ëª¨ì´ì œì´ì…˜ì„ í•œë‹¤ë©´, ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ì•…í™”ë  ìˆ˜ ìˆìŒ

---

## 3.2 ì˜ˆì œ1

```jsx
import React, { useMemo, useState } from 'react'

const hardCalculate = number => {
  console.log('ì–´ë ¤ìš´ ê³„ì‚°!')
  for (let i = 0; i < 999999; i++) {} // ìƒê°í•˜ëŠ” ì‹œê°„
  return number + 10000
}

const eashCalculate = number => {
  console.log('ì§± ì‰¬ìš´ ê³„ì‚°!')
  return number + 1
}

export default function App() {
  const [hardNumber, setHardNumber] = useState(1)
  const [easyNumber, setEashNumber] = useState(1)

  // const hardSum = hardCalculate(hardNumber);

  // 1. hardNumberê°€ ë³€ê²½ë  ë–„ë§Œ hardCalculateê°€ ë‹¤ì‹œ í˜¸ì¶œë¨
  // 2. hardNumberê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´, ê·¸ ì „ì— ê°–ê³ ìˆë˜ hardNumberì˜ ê°’ì„ ì¬ì‚¬ìš©í•¨
  const hardSum = useMemo(() => {
    return hardCalculate(hardNumber)
  }, [hardNumber])
  const easySum = eashCalculate(hardNumber)

  return (
    <div>
      <h3>ì–´ë ¤ìš´ ê³„ì‚°ê¸°</h3>
      <input type="number" value={hardNumber} onChange={e => setHardNumber(parseInt(e.target.value))} />
      <span>+ 10000 = {hardSum}</span>
      <h3>ì‰¬ìš´ ê³„ì‚°ê¸°</h3>
      <input type="number" value={easyNumber} onChange={e => setEashNumber(parseInt(e.target.value))} />
      <span>+ 1 = {easySum}</span>
    </div>
  )
}
```

---

## 3.3 ì˜ˆì œ2

```jsx
import React, { useEffect, useMemo, useState } from 'react'

export default function App() {
  const [number, setNumber] = useState(0)
  const [isKorea, setIsKorea] = useState(true)

  // 1. JS íƒ€ì… ì¢…ë¥˜ : ì›ì‹œíƒ€ì… | ê°ì²´íƒ€ì…(ì›ì‹œíƒ€ì…ì„ ì œì™¸í•œ ëª¨ë“  ê²ƒ, Object, Array)
  // - ì–´ë–¤ ë³€ìˆ˜ì— ê°ì²´íƒ€ì…ì„ í• ë‹¹í•˜ë©´, ê°ì²´íƒ€ì…ì´ í¬ê¸°ê°€ í¬ê¸° ë•Œë¬¸ì—
  // - ë©”ëª¨ë¦¬ ìƒì— ê³µê°„ì´ í• ë‹¹ë˜ì–´ ì €ì¥ë˜ê³ , ë³€ìˆ˜ì—ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ í• ë‹¹ë¨
  // - ë˜‘ê°™ì€ ê°ì²´ë¥¼ í• ë‹¹í•´ë„, ë‘ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ===ì„ í•˜ë©´ false ë‚˜ì˜´
  const location = useMemo(() => {
    return {
      country: isKorea ? 'í•œêµ­' : 'ì™¸êµ­',
      // ë­”ê°€ ì˜¤ë˜ê±¸ë¦¬ëŠ” ì‘ì—…ì„ í•´ì•¼í•œë‹¤ë©´, ê¼­ í•„ìš”í•  ë–„ë§Œ í˜¸ì¶œ
    }
  }, [isKorea])

  useEffect(() => {
    console.log('useEffect í˜¸ì¶œ')
  }, [location])

  return (
    <div>
      <h2>í•˜ë£¨ì— ëª‡ë¼ ë¨¹ì–´ìš”?</h2>
      <input type="number" value={number} onChange={e => setNumber(e.target.value)} />
      <hr />
      <h2>ì–´ëŠ ë‚˜ë¼ì— ìˆì–´ìš”?</h2>
      <p>ë‚˜ë¼ : {location.country}</p>
      <button onClick={() => setIsKorea(!isKorea)}>ë¹„í–‰ê¸° íƒ€ì</button>
    </div>
  )
}
```

---

# 4. useCallback

ì»´í¬ë„ŒíŠ¸ì˜ ì„±ëŠ¥ ìµœì í™”(Optimization)ì— ì‚¬ìš©ë˜ëŠ” ëŒ€í‘œì ì¸ Hookì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- `useMemo` = íŠ¹ì • í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ì§€ ì•Šê³  ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜
- `useCallback` = íŠ¹ì • í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ì§€ ì•Šê³  ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜

`Memoization`

- ë™ì¼í•œ ê°’ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œí•´ì•¼ í•œë‹¤ë©´,
- ë§¨ ì²˜ìŒ ê°’ì„ ê³„ì‚°í•  ë–„, í•´ë‹¹ ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì„œ, í•„ìš”í•  ë•Œë§ˆë‹¤ ë˜ ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šê³ 
- **ë©”ëª¨ë¦¬ì—ì„œ êº¼ë‚´ì„œ ì¬ì‚¬ìš©**ì„ í•˜ëŠ” ê¸°ë²•
- ì‰½ê²Œ ë§í•´, **ìì£¼ ì‚¬ìš©í•˜ëŠ” ê°’ì„ ìºì‹±ì„ í•´ë‘¬ì„œ ê·¸ ê°’ì´ í•„ìš”í•  ë–„ë§ˆë‹¤ ë‹¤ì‹œ ê³„ì‚°í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ êº¼ë‚´ì„œ ì“°ëŠ” ê²ƒ**

---

## 4.1 ê°œë…

> useMemo ë³µìŠµ
>
> ```jsx
> // useMemo(ì½œë°±í•¨ìˆ˜, ë°°ì—´)
> // - ì½œë°±í•¨ìˆ˜ : ë©”ëª¨ì´ì œì´ì…˜í•´ì„œ ë¦¬í„´í•´ì¤„ í•¨ìˆ˜
> // - ë°°ì—´ : ì˜ì¡´ì„± ë°°ì—´ì´ë¼ê³  ë¶ˆë¦¼, ìš”ì†Œì˜ ê°’ì´ ì—…ë°ì´íŠ¸ë  ë–„ë§Œ ì½œë°±í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ í˜¸ì¶œ
> // -- ë©”ëª¨ì´ì œì´ì…˜ëœ ê°’ì„ ì—…ë°ì´íŠ¸í•´ì„œ ë‹¤ì‹œ ë©”ëª¨ì´ì œì´ì…˜í•´ì¤Œ
> // -- ë¹ˆ ë°°ì—´ì„ ë„˜ê²¨ì£¼ë©´, ì»´í¬ë„ŒíŠ¸ê°€ mountë˜ì—ˆì„ ë•Œë§Œ ê°’ì„ ê³„ì‚°í•˜ê³ , ì´í›„ì—ëŠ” í•­ìƒ ë©”ëª¨ì´ì œì´ì…˜ëœ ê°’ì„ êº¼ë‚´ì”€
> useMemo(() => {
>   return value
> }, [item])
> ```

useMemoì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, `useCallback`ì€ ì¸ìë¡œ ì „ë‹¬í•œ ì½œë°±í•¨ìˆ˜ ê·¸ ìì²´ë¥¼ ë©”ëª¨ì´ì œì´ì…˜í•´ì¤Œ

- `useMemo` = ì½œë°±í•¨ìˆ˜ê°€ ë¦¬í„´í•˜ëŠ” ê°’ì„ ë©”ëª¨ì´ì œì´ì…˜í•´ì¤Œ
- `useCallback` = ì¸ìë¡œ ì „ë‹¬í•œ ì½œë°±í•¨ìˆ˜ ê·¸ ìì²´ë¥¼ ë©”ëª¨ì´ì œì´ì…˜í•´ì¤Œ

```jsx
const calculate = useCallback(
  num => {
    return num + 1
  },
  [item],
)
// calculate()ë¥¼ ë©”ëª¨ì´ì œì´ì…˜í•´ì¤€ë‹¤ë©´, useCallbackìœ¼ë¡œ ê°ì‹¸ì£¼ë©´ ë¨
// ê·¸ëŸ¬ë©´ calculate()ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,
// í•„ìš”í•  ë–„ë§ˆë‹¤ ë©”ëª¨ë¦¬ì—ì„œ ê°€ì ¸ì™€ì„œ ì¬ì‚¬ìš©í•¨
```

ì°¸ê³ ë¡œ JSì—ì„œ í•¨ìˆ˜ëŠ” ì‚¬ì‹¤ ê°ì²´ì˜ í•œ ì¢…ë¥˜ì…ë‹ˆë‹¤.

- Reactì—ì„œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ë§ ê·¸ëŒ€ë¡œ í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì—,
- `ë Œë”ë§ â†’ Component í•¨ìˆ˜ í˜¸ì¶œ â†’ ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ë‚´ë¶€ ë³€ìˆ˜ ì´ˆê¸°í™”`

```jsx
// í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ì•ˆì—
// calculateë³€ìˆ˜ì— numì„ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜(ê°ì²´)ê°€ í• ë‹¹ë˜ì–´ ìˆëŠ” í˜•íƒœ
function Component() {
  const calculate = num => {
    return num + 1
  }
  return <div>{value}</div>
}
```

`useCallbackìœ¼ë¡œ ë©”ëª¨ì´ì œì´ì…˜`ì„ í•´ì£¼ë©´,

- `ë Œë”ë§ â†’ Component í•¨ìˆ˜ í˜¸ì¶œ â†’ Memoizeëœ í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©`
- ì¦‰, ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ë”ë¼ë„ calculateê°€ ì´ˆê¸°í™”ë˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆìŒ
  - ì»´í¬ë„ŒíŠ¸ê°€ ë§¨ ì²˜ìŒ ë Œë”ë§ë  ë–„ë§Œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ calculateë¥¼ ì´ˆê¸°í™”í•´ì£¼ê³ ,
  - ì´í›„ì— ë Œë”ë§ë  ë–„ëŠ” calculate ë³€ìˆ˜ê°€ ìƒˆë¡œìš´ í•¨ìˆ˜ ê°ì²´ë¥¼ í• ë‹¹ë°›ëŠ”ê²Œ ì•„ë‹ˆë¼,
  - ì´ì „ì— ë°›ì€ í•¨ìˆ˜ ê°ì²´ë¥¼ ê³„ì† ê°–ê³ ìˆìœ¼ë©´ì„œ ì¬ì‚¬ìš©í•¨

```jsx
function Component() {
  const calculate = useCallback(
    num => {
      return num + 1
    },
    [item],
  )
  return <div>{value}</div>
}
```

---

### 4.1.1 useCallback êµ¬ì¡°

```jsx
// useCallback(ë©”ëª¨ì´ì œì´ì…˜í•´ì¤„ ì½œë°±í•¨ìˆ˜, ì˜ì¡´ì„±ë°°ì—´)
const calculate = useCallback(
  num => {
    return num + 1
  },
  [item],
)
// calculateëŠ” ë©”ëª¨ì´ì œì´ì…˜ëœ í•¨ìˆ˜(ê°ì²´)ë¥´ ê°–ê²Œë¨
// ì˜ì¡´ì„±ë°°ì—´ì˜ ê°’(=item)ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì´ìƒ ë‹¤ì‹œ ì´ˆê´´í™”ë˜ì§€ ì•ŠìŒ
```

---

## 4.2 ì˜ˆì‹œ1

```jsx
import React, { useCallback, useEffect, useState } from 'react'

export default function App() {
  const [number, setNumber] = useState(0)
  const [toggle, setToggle] = useState(true)

  const someFunction = useCallback(() => {
    console.log(`someFunc: number: ${number}`)
    return
  }, [number])

  useEffect(() => {
    console.log('someFunctionì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.')
  }, [someFunction])

  return (
    <div>
      <input type="number" value={number} onChange={e => setNumber(e.target.value)} />
      <button onClick={() => setToggle(!toggle)}>{toggle.toString()}</button>

      <button onClick={someFunction}>Call someFunc</button>
    </div>
  )
}
```

---

## 4.3 ì˜ˆì‹œ2

```jsx
import React, { useEffect, useState } from 'react'

export default function Box({ createBoxStyle }) {
  const [style, setStyle] = useState({})

  useEffect(() => {
    console.log('ë°•ìŠ¤ í‚¤ìš°ê¸°')
    setStyle(createBoxStyle())
  }, [createBoxStyle])

  return <div style={style}></div>
}
```

```jsx
import React, { useCallback, useState } from 'react'
import Box from './Box'

export default function App() {
  const [size, setSize] = useState(100)
  const [isDark, setIsDark] = useState(false)

  const createBoxStyle = useCallback(() => {
    return {
      backgroundColor: 'pink',
      width: `${size}px`,
      height: `${size}px`,
    }
  }, [size])

  return (
    <div style={{ background: isDark ? 'black' : 'white' }}>
      <input type="number" value={size} onChange={e => setSize(e.target.value)} />
      <button onClick={() => setIsDark(!isDark)}>Change Theme</button>
      <Box createBoxStyle={createBoxStyle} />
    </div>
  )
}
```

---

# 5. useReducer

`useReducer` : ì—¬ëŸ¬ ê°œì˜ ë³µì¡í•œ í•˜ìœ„ stateë¥¼ ë‹¤ë¤„ì•¼ í•  ë•Œ, useStateëŒ€ì‹  useReducerë¥¼ ì‚¬ìš©í•˜ë©´ í¸ë¦¬

- ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ ìƒí™©ì— ë”°ë¼ ë‹¤ì–‘í•œ ìƒíƒœë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ì£¼ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” Hook

![React_14_4](https://raw.githubusercontent.com/berenickt/image-server/main/img/React_14_4.png)

useReducerëŠ” ë‹¤ìŒ 3ê°€ì§€ë¡œ êµ¬ì„±ë¨

- `Reducer` : stateë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ì—­í• 
  - e.g. ê±°ë‚´ë‚´ì—­(state)ë¥¼ ì—…ë°ì´íŠ¸í•´ì£¼ëŠ” ì€í–‰
- `Dispatch` : Reducerì—ê²Œ ìš”êµ¬ë¥¼ í•˜ëŠ” ì—­í• 
  - e.g. ì€í–‰ì— ê±°ë˜ë‚´ì—­ì„ ì—…ë°ì´íŠ¸í•´ë‹¬ë¼ê³  ìš”ì²­í•˜ëŠ” ê³ ê°
- `Action` : Reducerì—ê²Œ ìš”êµ¬í•˜ëŠ” ë‚´ìš©
  - e.g. ê³ ê°ì´ ì€í–‰ì—ê²Œ â€œë§Œì›ì„ ì¶œê¸ˆí•´ë‹¬ë¼â€ë¼ëŠ” í–‰ë™

![React_14_5](https://raw.githubusercontent.com/berenickt/image-server/main/img/React_14_5.png)

ì´ë¥¼ ì»´í¬ë„ŒíŠ¸ ê´€ì ì—ì„œ ë³´ë©´ ìœ„ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤.

---

## 5.1 ì˜ˆì œ 1 : ì€í–‰

```jsx
import React, { useReducer, useState } from 'react'

// reducer - stateë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì—­í• (ì€í–‰)
// dispatch - stateë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ìš”êµ¬
// action - ìš”êµ¬í•˜ëŠ” ë‚´ìš©

const ACTION_TYPES = {
  deposit: 'deposit',
  withdraw: 'withdraw',
}

const reducer = (state, action) => {
  console.log('reducerê°€ ì¼ì„ í•©ë‹ˆë‹¤!', state, action)
  switch (action.type) {
    case ACTION_TYPES.deposit:
      return state + action.payload
    case ACTION_TYPES.withdraw:
      return state - action.payload
    default:
      return state
  }
}

export default function App() {
  const [number, setNumber] = useState(0)
  const [money, dispatch] = useReducer(reducer, 0) // reducer, ì´ˆê¸°ê°’

  return (
    <div>
      <h2>useReducer ì€í–‰ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</h2>
      <p>ì”ê³ : {money}ì›</p>
      <input type="number" value={number} onChange={e => setNumber(parseInt(e.target.value))} step="1000" />
      <button onClick={() => dispatch({ type: ACTION_TYPES.deposit, payload: number })}>ì˜ˆê¸ˆ</button>
      <button onClick={() => dispatch({ type: ACTION_TYPES.withdraw, payload: number })}>ì¶œê¸ˆ</button>
    </div>
  )
}
```

---

## 5.2 ì˜ˆì œ 2 : ì¶œì„ë¶€(ë³µì¡í•œ state)

```jsx
import React from 'react'

export default function Student({ name, dispatch, id, isHere }) {
  return (
    <div>
      <span
        style={{
          textDecoration: isHere ? 'line-through' : 'none',
          color: isHere ? 'grey' : 'black',
        }}
        onClick={() => dispatch({ type: 'mark-student', payload: { id } })}
      >
        {name}
      </span>
      <button onClick={() => dispatch({ type: 'delete-student', payload: { id } })}>ì‚­ì œ</button>
    </div>
  )
}
```

```jsx
import React, { useReducer, useState } from 'react'
import Student from './Student'

const reducer = (state, action) => {
  switch (action.type) {
    case 'add-student':
      const name = action.payload.name
      const newStudent = {
        id: Date.now(),
        name,
        isHere: false,
      }
      return {
        count: state.count + 1,
        students: [...state.students, newStudent],
      }
    case 'delete-student':
      return {
        count: state.count - 1,
        students: state.students.filter(student => student.id !== action.payload.id),
      }
    case 'mark-student':
      return {
        count: state.count,
        students: state.students.map(student => {
          if (student.id === action.payload.id) {
            return { ...student, isHere: !student.isHere }
          }
          return student
        }),
      }
    default:
      return state
  }
}

const initialState = {
  count: 0,
  students: [],
}

export default function App() {
  const [name, setName] = useState('')
  const [studentsInfo, dispatch] = useReducer(reducer, initialState)

  return (
    <div>
      <h1>ì¶œì„ë¶€</h1>
      <p>ì´ í•™ìƒ ìˆ˜ : {studentsInfo.count}</p>
      <input type="text" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" value={name} onChange={e => setName(e.target.value)} />
      <button onClick={() => dispatch({ type: 'add-student', payload: { name } })}>ì¶”ê°€</button>
      {studentsInfo.students.map(student => {
        return (
          <Student key={student.id} name={student.name} dispatch={dispatch} id={student.id} isHere={student.isHere} />
        )
      })}
    </div>
  )
}
```

---

# 6. React.memoë¡œ ì»´í¬ë„ŒíŠ¸ ìµœì í™”

êµ³ì´ ë Œë”ë§ë  í•„ìš”ì—†ëŠ” Componentê°€ ê³„ì† ë°˜ë³µì ìœ¼ë¡œ ë Œë”ë§ëœë‹¤ë©´,
ë˜ ê·¸ ë°˜ë³µì ìœ¼ë¡œ ë Œë”ë§ëœ Componentê°€ ë³µì¡í•œ ë¡œì§ì´ë¼ë©´, Component ì„±ëŠ¥ì´ ìµœì•…ì¼ ê²ƒì…ë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ React.memo(ft. useMemo, useCallback)ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ReaecëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ë©´, ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ë„ ìë™ìœ¼ë¡œ ë Œë”ë§**ë©ë‹ˆë‹¤.
ë§Œì•½ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ìì£¼ ë Œë”ë§ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¼ë©´, ìì‹ ì»´í¬ë„ŒíŠ¸ëŠ” ë Œë”ë§ë  í•„ìš”ê°€ ì—†ìŒì—ë„ ë Œë”ë§ë©ë‹ˆë‹¤.
ê·¸ë˜ì„œ ë Œë”ë§ íšŸìˆ˜ë¥¼ ì œí•œí•´ì¤„ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ React.memoë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

- `ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(Higher-Order Component; HOC)`
  - ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¸ìë¡œ ë°›ì•„ì„œ, ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜
- `React.memo` = Reactì—ì„œ ì œê³µí•˜ëŠ” ê³ ì°¨ ì»´í¬ë„ŒíŠ¸
  - ë³´í†µ ì»´í¬ë„ŒíŠ¸ë¥¼ React.memoì— ì¸ìë¡œ ë°›ì•„, UIë‚˜ ê¸°ëŠ¥ì€ ë˜‘ê°™ìœ¼ë©´ì„œ, ìµœì í™”ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜
- ìµœì í™”ëœ ì»´í¬ë„ŒíŠ¸ëŠ” ë Œë”ë§ë  ìƒí™©ë§ˆë‹¤ `Props Check`ë¥¼ í†µí•´, **ìì‹ ì´ ë°›ëŠ” Propsê°€ ë³€í™”ê°€ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ì²´í¬**í•¨
  - ë³€í™”ê°€ ìˆë‹¤ë©´ â†’ ë Œë”ë§
  - ë³€í™”ê°€ ì—†ë‹¤ë©´ â†’ ë Œë”ë§X, ê¸°ì¡´ ë Œë”ë§ëœ ë‚´ìš©ì„ ì¬ì‚¬ìš©
- React.memoì˜ memoëŠ”? **Memoization(ë©”ëª¨ì´ì œì´ì…˜)ì„ ì˜ë¯¸**
  - ë§¨ ì²˜ìŒ ê°’ì„ ê³„ì‚°í•  ë–„, í•´ë‹¹ ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì„œ, í•„ìš”í•  ë•Œë§ˆë‹¤ ë˜ ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šê³ 
  - **ë©”ëª¨ë¦¬ì—ì„œ êº¼ë‚´ì„œ ì¬ì‚¬ìš©**ì„ í•˜ëŠ” ê¸°ë²•
- React.memoëŠ” ì˜ ì‚¬ìš©í•˜ë©´ ì„±ëŠ¥ì´ í–¥ìƒë˜ì§€ë§Œ, ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©í•œë‹¤ë©´ ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ì €í•˜ë¨!
  - ì™œëƒí•˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë©”ëª¨ì´ì§•í•  ë–„, ë Œë”ë§ëœ ê²°ê³¼ë¥¼ ì–´ë”˜ê°€ì— ì €ì¥í•´ì•¼ ë˜ëŠ”ë°,
  - ì´ë–„ ë©”ëª¨ë¦¬ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì†Œë¹„í•˜ê¸° ë–„ë¬¸
- React.memoë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
  - ì»´í¬ë„ŒíŠ¸ê°€ **ê°™ì€ Propsë¡œ ìì£¼ ë Œë”ë§ ë  ë–„**
  - ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë–„ë§ˆë‹¤ **ë³µì¡í•œ ë¡œì§ì„ ì²˜ë¦¬í•´ì•¼ í•œë‹¤ë©´**
- React.memoëŠ” **ì˜¤ì§ Props ë³€í™”ì—ë§Œ ì˜ì¡´**í•˜ëŠ” ìµœì í™” ë°©ë²•
  - ì»´í¬ë„ŒíŠ¸ê°€ useState, useReducer, useContextê°™ì€ ìƒíƒœ ê´€ë ¨ Hookì´ë¼ë©´,
  - Props ë³€í™”ê°€ ì—†ë”ë¼ë„ state, contextê°€ ë³€í•  ë–„ë§ˆë‹¤ ë‹¤ì‹œ ë Œë”ë§ë¨

---

## 6.1 ì˜ˆì œ 1 : momo ì‚¬ìš© ì „

```jsx
import React from 'react'

export default function Child({ name, age }) {
  console.log('ğŸ‘¶ìë…€  ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  return (
    <div style={{ border: '2px solid powderblue', padding: '10px' }}>
      <h3>ğŸ‘¶ìë…€</h3>
      <p>name: {name}</p>
      <p>age: {age}</p>
    </div>
  )
}
```

```jsx
import { useState } from 'react'
import Child from './Child'

export default function App() {
  const [parentAge, setParentAge] = useState(0)
  const [childAge, setChildAge] = useState(0)

  const incrementParentAge = () => {
    setParentAge(parentAge + 1)
  }

  const incrementChildAge = () => {
    setChildAge(childAge + 1)
  }

  console.log('ğŸ§‘ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  return (
    <div style={{ border: '2px solid orange', padding: '10px' }}>
      <h1>ğŸ§‘ë¶€ëª¨</h1>
      <p>age: {parentAge}</p>
      <button onClick={incrementParentAge}>ë¶€ëª¨ ë‚˜ì´ ì¦ê°€</button>
      <button onClick={incrementChildAge}>ìë…€ ë‚˜ì´ ì¦ê°€</button>
      <Child name={'í™ê¸¸ë™'} age={childAge} />
    </div>
  )
}
```

ë¸Œë¼ìš°ì € ì½˜ì†” ì°½ì„ í™•ì¸í•´ë³´ë©´,

- ë¶€ëª¨ ë‚˜ì´ê°€ ì¦ê°€(ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§)í•˜ë©´, ìì‹ ì»´í¬ë„ŒíŠ¸ë„ ë Œë”ë§ë¨
- ìì‹ ë‚˜ì´ê°€ ì¦ê°€(ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§)í•˜ë©´, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë„ ë Œë”ë§ë¨
- ë¬¸ì œì : **ë Œë”ë§í•  í•„ìš”ì—†ëŠ” ì»´í¬ë„ŒíŠ¸ë„ ë Œë”ë§ë˜ê³  ìˆìŒ**
  - ì´ë¥¼ React.memoë¡œ í•´ê²°í•  ìˆ˜ ìˆìŒ

---

## 6.2 ì˜ˆì œ 1: momo ì‚¬ìš© í›„

- React.memo ì‚¬ìš©ë²•
  - ìµœì í™”í•˜ë ¤ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ memo()ë¡œ ê°ì‹¸ì£¼ë©´ ë¨

```jsx
import React, { memo } from 'react'

function Child({ name, age }) {
  console.log('ğŸ‘¶ìë…€  ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  return (
    <div style={{ border: '2px solid powderblue', padding: '10px' }}>
      <h3>ğŸ‘¶ìë…€</h3>
      <p>name: {name}</p>
      <p>age: {age}</p>
    </div>
  )
}

export default memo(Child) // React.memo ì‚¬ìš©ë²• : ìµœì í™”í•˜ë ¤ëŠ” ì»´í¬ë„ŒíŠ¸ memo()ë¡œ ê°ì‹¸ì£¼ê¸°
// memo() : reactì—ì„œ ì œê³µí•˜ëŠ” ê³ ì°¨ ì»´í¬ë„ŒíŠ¸
// - ì»´í¬ë„ŒíŠ¸ë¥¼ ì¸ìë¡œ ë°›ì•„, propsì²´í¬í•˜ëŠ” ìµœì í™”ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜
```

---

## 6.3 ì˜ˆì œ 2 : useMemo + React.memo

useCallback + useMemo + React.memoë¥¼ ì‚¬ìš©í•˜ë©´ í­ ë„“ì€ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆìŒ

### 6.3.1 React.memoë§Œ ì ìš©í•œ ê²½ìš°

```jsx
import React, { memo } from 'react'

function Child({ name }) {
  console.log('ğŸ‘¶ìë…€  ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  return (
    <div style={{ border: '2px solid powderblue', padding: '10px' }}>
      <h3>ğŸ‘¶ìë…€</h3>
      <p>ì„±: {name.lastName}</p>
      <p>ì´ë¦„: {name.firstName}</p>
    </div>
  )
}

export default memo(Child)
```

```jsx
import { useState } from 'react'
import Child from './Child'

export default function App() {
  const [parentAge, setParentAge] = useState(0)

  const incrementParentAge = () => {
    setParentAge(parentAge + 1)
  }

  console.log('ğŸ§‘ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  // JSì—ì„œ ì˜¤ë¸Œì íŠ¸ëŠ” ì°¸ì¡°í˜• ë°ì´í„°ë¡œ ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ê³  ìˆë‹¤.
  // í•¨ìˆ˜ì•ˆì˜ ëª¨ë“  ë³€ìˆ˜ëŠ” ë Œë”ë§ë  ë–„, ì´ˆê¸°í™”ë¨
  // ê·¸ë˜ì„œ nameì´ë¼ëŠ” ë³€ìˆ˜ëŠ” ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ê³  ìˆìŒ
  // Child ì»´í¬ë„ŒíŠ¸ëŠ” nameì´ë¼ëŠ” ë³€ìˆ˜ê°€ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ê³  ìˆê¸° ë•Œë¬¸ì—
  // React.memoì…ì¥ì—ì„œëŠ” nameì´ë¼ëŠ” ë³€ìˆ˜ê°€ ë³€ê²½ë˜ì—ˆë‹¤ê³  íŒë‹¨í•˜ê³  ë Œë”ë§ì„ í•œë‹¤.
  const name = {
    lastName: 'í™',
    firstName: 'ê¸¸ë™',
  }

  return (
    <div style={{ border: '2px solid orange', padding: '10px' }}>
      <h1>ğŸ§‘ë¶€ëª¨</h1>
      <p>age: {parentAge}</p>
      <button onClick={incrementParentAge}>ë¶€ëª¨ ë‚˜ì´ ì¦ê°€</button>
      <Child name={name} />
    </div>
  )
}
```

### 6.3.2 useMemo + React.memo ì ìš©í•œ ê²½ìš°

- ì–´ë– í•œ ê°’ì„ ë©”ëª¨ì´ì§•í•˜ëŠ” ê²½ìš° ì‚¬ìš©

```jsx
import { useMemo, useState } from 'react'
import Child from './Child'

export default function App() {
  const [parentAge, setParentAge] = useState(0)

  const incrementParentAge = () => {
    setParentAge(parentAge + 1)
  }

  console.log('ğŸ§‘ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  // useMemoë¥¼ ì‚¬ìš©í•˜ë©´, nameì´ë¼ëŠ” ë³€ìˆ˜ê°€ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ê³  ìˆì–´ë„
  // nameì´ë¼ëŠ” ë³€ìˆ˜ì˜ ê°’ì´ ê°™ë‹¤ë©´, React.memoëŠ” nameì´ë¼ëŠ” ë³€ìˆ˜ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ê³  íŒë‹¨ í›„ ë Œë”ë§ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.
  // ì¦‰, React.memoëŠ” nameì´ë¼ëŠ” ë³€ìˆ˜ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,
  // nameì´ë¼ëŠ” ë³€ìˆ˜ê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•œë‹¤.
  // ê·¸ë˜ì„œ nameì´ë¼ëŠ” ë³€ìˆ˜ê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´, React.memoëŠ” ë Œë”ë§ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.
  const name = useMemo(() => {
    return {
      lastName: 'í™',
      firstName: 'ê¸¸ë™',
    }
  }, [])

  return (
    <div style={{ border: '2px solid orange', padding: '10px' }}>
      <h1>ğŸ§‘ë¶€ëª¨</h1>
      <p>age: {parentAge}</p>
      <button onClick={incrementParentAge}>ë¶€ëª¨ ë‚˜ì´ ì¦ê°€</button>
      <Child name={name} />
    </div>
  )
}
```

---

## 6.4 ì˜ˆì œ 3 : useCallback + React.memo

### 6.4.1 React.memoë§Œ ì ìš©í•œ ê²½ìš°

```jsx
import React, { memo } from 'react'

function Child({ name, tellMe }) {
  console.log('ğŸ‘¶ìë…€  ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  return (
    <div style={{ border: '2px solid powderblue', padding: '10px' }}>
      <h3>ğŸ‘¶ìë…€</h3>
      <p>ì´ë¦„: {name}</p>
      <button onClick={tellMe}>ì—„ë§ˆ ë‚˜ ì‚¬ë‘í•´?</button>
    </div>
  )
}

export default memo(Child)
```

```jsx
import { useState } from 'react'
import Child from './Child'

export default function App() {
  const [parentAge, setParentAge] = useState(0)

  const incrementParentAge = () => {
    setParentAge(parentAge + 1)
  }

  console.log('ğŸ§‘ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ë„ ë Œë”ë§ì´ ë˜ëŠ”ë°,
  // JSì—ì„œ í•¨ìˆ˜ëŠ” ê°ì²´ì˜ í•œ ì¢…ë¥˜ì…ë‹ˆë‹¤.
  // ë§ˆì°¬ê°€ì§€ë¡œ tellMe()ëŠ” ê°ì²´ì´ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤.
  // ê·¸ë˜ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë–„ë§ˆë‹¤, ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ tellMe()ë¥¼ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ì „ë‹¬ë©ë‹ˆë‹¤.
  const tellMe = () => {
    console.log('ê¸¸ë™ì•„ ì‚¬ë‘í•´')
  }

  return (
    <div style={{ border: '2px solid orange', padding: '10px' }}>
      <h1>ğŸ§‘ë¶€ëª¨</h1>
      <p>age: {parentAge}</p>
      <button onClick={incrementParentAge}>ë¶€ëª¨ ë‚˜ì´ ì¦ê°€</button>
      <Child name={'í™ê¸¸ë™'} tellMe={tellMe} />
    </div>
  )
}
```

---

### 6.4.2 useCallback + React.memo ì ìš©í•œ ê²½ìš°

- useMemo : ì–´ë– í•œ ê°’ì„ ë©”ëª¨ì´ì§•í•˜ëŠ” ê²½ìš° ì‚¬ìš©
- useCallback : ì–´ë– í•œ í•¨ìˆ˜ë¥¼ ë©”ëª¨ì´ì§•í•˜ëŠ” ê²½ìš° ì‚¬ìš©

```jsx
import { useCallback, useState } from 'react'
import Child from './Child'

export default function App() {
  const [parentAge, setParentAge] = useState(0)

  const incrementParentAge = () => {
    setParentAge(parentAge + 1)
  }

  console.log('ğŸ§‘ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì—ˆì–´ìš”.')

  // useCallbackì„ ì‚¬ìš©í•˜ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
  const tellMe = useCallback(() => {
    console.log('ê¸¸ë™ì•„ ì‚¬ë‘í•´')
  }, [])

  return (
    <div style={{ border: '2px solid orange', padding: '10px' }}>
      <h1>ğŸ§‘ë¶€ëª¨</h1>
      <p>age: {parentAge}</p>
      <button onClick={incrementParentAge}>ë¶€ëª¨ ë‚˜ì´ ì¦ê°€</button>
      <Child name={'í™ê¸¸ë™'} tellMe={tellMe} />
    </div>
  )
}
```

---

# 7. Custom Hook (ì»¤ìŠ¤í…€ í›…)

Reactì—ì„œ ì œê³µí•´ì£¼ëŠ” Hookì„ ì¡°í•©í•´ì„œ ì‚¬ìš©í•˜ë‹¤ë³´ë©´, ì¤‘ë³µëœ ì½”ë“œë“¤ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ì´ëŸ° ì¤‘ë³µì„ ì œê±°í•˜ê¸° ìœ„í•´ì„œ ê°œë°œìë“¤ì€ ìì‹ ë“¤ë§Œì˜ ì…ë§›ëŒ€ë¡œ Custom Hookì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Custom Hookì•ˆì—ì„œëŠ” ê¸°ì¡´ React Hookë“¤ì„ ê°€ì ¸ë‹¤ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì—¬ê¸°ì„œëŠ” `useInput, useFetch`ë¼ëŠ” Custom Hookì„ ë§Œë“¤ì–´ ë³¼ ê²ƒì„. ìê¸° ë§ˆìŒëŒ€ë¡œ Hookì„ ë§Œë“¤ì–´ ì“°ì„¸ìš”.

---

## 7.1 Custom Hookë§Œë“¤ê¸° : useInput

### 7.1.1 Custom Hook ì ìš© ì „

```jsx
import { useState } from 'react'

export default function App() {
  const [inputValue, setInputValue] = useState('')

  const handleChange = e => {
    setInputValue(e.target.value)
  }

  const handleSubmit = e => {
    alert(inputValue)
    setInputValue('')
  }

  return (
    <>
      <h1>useInput</h1>
      <input type="text" value={inputValue} onChange={handleChange} />
      <button onClick={handleSubmit}>í™•ì¸</button>
    </>
  )
}
```

ë§Œì•½ ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ê°€ ìˆê³ , ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ inputê°’ì„ ì²˜ë¦¬í•´ì¤˜ì•¼ í•œë‹¤ë©´, ë¡œì§ì„ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ë³µì‚¬ë¶™ì—¬ë„£ê¸°í•´ì•¼ í•©ë‹ˆë‹¤.
ê·¸ë ‡ê²Œ ë˜ë©´ ì¤‘ë³µì½”ë“œê°€ ë°œìƒí•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë¡œì§ì„ Custom Hookìœ¼ë¡œ ë§Œë“¤ì–´ ë†“ìœ¼ë©´, ì¬ì‚¬ìš©ì„±ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤.

---

### 7.1.2 Custom Hook ë§Œë“¤ê¸°

`hook/useInput.js`ë¥¼ ë§Œë“¤ì–´ ì›í•˜ëŠ” ë¡œì§ì„ í•¨ìˆ˜ ì•ˆì—ì„œ ë„£ì–´ì¤ë‹ˆë‹¤.

```jsx
import { useState } from 'react'

export default function useInput(initialValue, submitAction) {
  const [inputValue, setInputValue] = useState(initialValue)

  const handleChange = e => {
    setInputValue(e.target.value)
  }

  const handleSubmit = () => {
    setInputValue('')
    submitAction(inputValue)
  }

  return [inputValue, handleChange, handleSubmit]
}
```

ë§Œë“  Hookì„ Appì»´í¬ë„ŒíŠ¸ì— ì ìš©í•˜ê¸°

```jsx
import useInput from './hooks/useInput'

function displayMessage(message) {
  alert(message)
}

export default function App() {
  const [inputValue, handleChange, handleSubmit] = useInput('', displayMessage)

  return (
    <>
      <h1>useInput</h1>
      <input type="text" value={inputValue} onChange={handleChange} />
      <button onClick={handleSubmit}>í™•ì¸</button>
    </>
  )
}
```

---

## 7.2 Custom Hook ë§Œë“¤ê¸° : useFetch

### 7.2.1 Custom Hook ì ìš© ì „

```jsx
import { useEffect, useState } from 'react'

// ë”ë¯¸ ë°ì´í„° ë°˜í™˜í•´ì£¼ëŠ” API - jsonplaceholder
const baseURL = 'https://jsonplaceholder.typicode.com'

export default function App() {
  const [data, setData] = useState(null)

  const fetchUrl = type => {
    fetch(baseURL + '/' + type)
      .then(res => res.json())
      .then(res => setData(res))
  }

  useEffect(() => {
    fetchUrl('users')
  }, [])

  return (
    <>
      <h1>useFetch</h1>
      <button onClick={() => fetchUrl('users')}>Users</button>
      <button onClick={() => fetchUrl('Posts')}>Posts</button>
      <button onClick={() => fetchUrl('Todos')}>Todos</button>
      <pre>{JSON.stringify(data, null, 2)}</pre>
    </>
  )
}
```

---

### 7.2.2 Custom Hook ë§Œë“¤ê¸°

`hook/useFetch.js`ë¥¼ ë§Œë“¤ì–´ ì›í•˜ëŠ” ë¡œì§ì„ í•¨ìˆ˜ ì•ˆì—ì„œ ë„£ì–´ì¤ë‹ˆë‹¤.

```jsx
import { useEffect, useState } from 'react'

export default function useFetch(baseURL, initialType) {
  const [data, setData] = useState(null)

  const fetchUrl = type => {
    fetch(baseURL + '/' + type)
      .then(res => res.json())
      .then(res => setData(res))
  }

  useEffect(() => {
    fetchUrl(initialType)
  }, [])

  return {
    data,
    fetchUrl,
  }
}
```

ë§Œë“  Hookì„ Appì»´í¬ë„ŒíŠ¸ì— ì ìš©í•˜ê¸°

```jsx
import useFetch from './hooks/useFetch'

// ë”ë¯¸ ë°ì´í„° ë°˜í™˜í•´ì£¼ëŠ” API - jsonplaceholder
const baseURL = 'https://jsonplaceholder.typicode.com'

export default function App() {
  const { data: userData } = useFetch(baseURL, 'users')
  const { data: postData } = useFetch(baseURL, 'posts')

  return (
    <>
      <h1>User</h1>
      {userData && <pre>{JSON.stringify(userData[0], null, 2)}</pre>}
      <h1>Post</h1>
      {postData && <pre>{JSON.stringify(postData[0], null, 2)}</pre>}
    </>
  )
}
```

---

# [ì°¸ê³ ]

- [React ê³µì‹ë¬¸ì„œ Hooks API Referece](Hooks API Reference)
- ë³„ì½”ë”© ìœ íŠœë¸Œ
