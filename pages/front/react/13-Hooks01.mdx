---
title: '13-Hooks-ê¸°ì´ˆ'
date: 2022/12/22
---

# 1. Hooks = ì»´í¬ë„ŒíŠ¸ ì¸ìƒì— ê°„ì„­í•˜ëŠ” í•¨ìˆ˜

HooksëŠ” ë²„ì „ 16.8ë¶€í„° React ìš”ì†Œë¡œ ìƒˆë¡œ ì¶”ê°€ë¨
ì™œ ë„ì…ë˜ì—ˆëƒë©´? ê¸°ì¡´ì˜ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ë“¤ì€ ë³µì¡í•´ì§€ë©´ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œì§

- "**Detail ì»´í¬ë„ŒíŠ¸ ë“±ì¥ ì „ì—** ì´ê²ƒì¢€ í•´ì¤˜"
- "**Detail ì»´í¬ë„ŒíŠ¸ ì‚¬ë¼ì§€ê¸° ì „ì—** ì´ê²ƒì¢€ í•´ì¤˜"
- "**Detail ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ ë˜ê³ ë‚˜ì„œ** ì´ê²ƒì¢€ í•´ì¤˜"

ì´ë ‡ê²Œ ì½”ë“œì¢€ ì‹¤í–‰í•´ë‹¬ë¼ê³  ê°„ì„­í•  ìˆ˜ ìˆëŠ”ë°, ê°„ì„­ì€ `ê°ˆê³ ë¦¬(Hooks)`ë¥¼ ë‹¬ì•„ì„œ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ê±¸ **Lifecycle hook**ì´ë¼ê³  ë¶€ë¦„

---

# 2. ê³¼ê±° í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ Lifecycle hook ì“°ëŠ” ë²•

- ì˜›ë‚ ì—ëŠ” ì•ˆì— í•¨ìˆ˜ëª…ì„ ì €ë ‡ê²Œ ì¨ì£¼ë©´ ê°ê° íŠ¹ì • Lifecycleì—ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- í˜„ì¬ëŠ” ê¶Œì¥ë˜ëŠ” ë°©ì‹ì´ ì•„ë‹˜

```jsx
class Detail2 extends React.Component {
  componentDidMount() {
    // Detail2 ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë“œë˜ê³ ë‚˜ì„œ ì‹¤í–‰í•  ì½”ë“œ
  }
  componentDidUpdate() {
    // Detail2 ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë˜ê³ ë‚˜ì„œ ì‹¤í–‰í•  ì½”ë“œ
  }
  componentWillUnmount() {
    // Detail2 ì»´í¬ë„ŒíŠ¸ê°€ ì‚­ì œë˜ê¸°ì „ì— ì‹¤í–‰í•  ì½”ë“œ
  }
}
```

---

# 3. useState Hook

- [Using the State Hook](https://reactjs.org/docs/hooks-state.html)
- `state` = ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ

  - e.g. ì‹œê³„ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´?
    - í˜„ì¬ ì‹œê°„

- ê¸°ë³¸ì ì¸ Hookìœ¼ë¡œ, `í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸`ì—ì„œë„ ê°€ë³€ì ì¸ ìƒíƒœë¥¼ ì§€ë‹ ìˆ˜ ìˆê²Œ í•´ì¤Œ

```jsx
import React, { useState } from 'react'; // useState ë¶ˆëŸ¬ì˜¤ê¸°

export default const Counter = () => {
  // [ë³€í•˜ëŠ” ì´ˆê¸°ê°’ì„ ë‹´ì„ ë³€ìˆ˜, ì™¼ìª½ì´ˆê¸°ê°’ì˜ ë³€ê²½ì„ ë„ì™€ì£¼ëŠ” í•¨ìˆ˜]  = useState(ì´ˆê¸°ê°’ ì„¤ì •);
  const [value, setValue] = useState(0);

  return (
    <div>
      <p>í˜„ì¬ ì¹´ìš´í„° ê°’ì€ {value}ì…ë‹ˆë‹¤.</p>
      <button onClick={() => setValue(value + 1)}>+1</button>
      <button onClick={() => setValue(value - 1)}>-1</button>
    </div>
  );
};
```

---

# 4. useEffect Hook

- [Using the Effect Hook](https://reactjs.org/docs/hooks-effect.html)
- `useEffect` = ë¦¬ì•¡íŠ¸ **ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ì •**í•  ìˆ˜ ìˆëŠ” Hook
- useEffect ì•ˆì— ì ì€ ì½”ë“œëŠ” HTML ë Œë”ë§ ì´í›„ì— ë™ì‘
- ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ ìˆë‹¤ë©´? **useEffectì— ë„£ì–´ë‘ê¸°!**
  - useEffect ì•ˆì— ì ìœ¼ë©´ HTML ë³´ì—¬ì£¼ê³  ë‚˜ì„œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—… ì‹¤í–‰
  - ì¡°ê¸ˆì´ë¼ë„ HTML ë Œë”ë§ì´ ë¹ ë¥¸ ì‚¬ì´íŠ¸ë¥¼ ì›í•˜ë©´, useEffect ì•ˆì— ë„£ì–´ë†“ê¸°
- React ë§Œë“ ì‚¬ëŒì´ ì´ í•¨ìˆ˜ë¥¼ useEffectë¼ê³  ì‘ëª…í•œ ì´ìœ 
  - í•¨ìˆ˜ì•ˆì— ì½”ë“œì§¤ ë•Œ **í•¨ìˆ˜ì˜ í•µì‹¬ê¸°ëŠ¥ ì™¸ì— ì“¸ë°ì—†ëŠ” ê¸°ëŠ¥**ë“¤ì„ í”„ë¡œê·¸ë˜ë° ìš©ì–´ë¡œ `side effect`ë¼ê³  ë¶€ë¦„
  - useEffectë„ ì»´í¬ë„ŒíŠ¸ì˜ í•µì‹¬ ê¸°ëŠ¥ì€ HTML ë Œë”ë§ì´ë¼ **ê·¸ê±° ì™¸ì˜ ì“¸ë°ì—†ëŠ” ê¸°ëŠ¥ë“¤ì€ useEffect ì•ˆì—** ì ìœ¼ë¼ëŠ” ì†Œë¦¬
  - ì˜¤ë˜ê±¸ë¦¬ëŠ” ë°˜ë³µì—°ì‚°, ì„œë²„ì—ì„œ ë°ì´í„°ê°€ì ¸ì˜¤ëŠ” ì‘ì—…, íƒ€ì´ë¨¸ë‹¤ëŠ”ê±° ì´ëŸ°ê±´ useEffect ì•ˆì— ë§ì´ ì ê¸°

```jsx
import {useState, useEffect} from 'react';

function Detail(){
  useEffect(()=>{
    // ì—¬ê¸°ì ì€ ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ ë¡œë“œ & ì—…ë°ì´íŠ¸ ë§ˆë‹¤ ì‹¤í–‰ë¨
  });
  return ...
}
```

---

## 4.1 useEffect 2ê°€ì§€ í˜•íƒœ

```jsx
// 1. í•¨ìˆ˜ì˜ ì¸ìë¡œ ì½œë°±í•¨ìˆ˜ë§Œ ë°›ëŠ” ê²½ìš°
// - ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë ë•Œ ë§ˆë‹¤ ì‹¤í–‰
// - ì»´í¬ë„ŒíŠ¸ê°€ ë§¨ ì²˜ìŒ í™”ë©´ì— ë Œë”ë§ & ë‹¤ì‹œ ë Œë”ë§ë  ë–„
useEffect(() => {
  // ì‘ì—…
})

// 2. í•¨ìˆ˜ì˜ ì¸ìë¡œ (ì½œë°±í•¨ìˆ˜, ë°°ì—´)ì„ ë°›ëŠ” ê²½ìš°
// - (1) ì»´í¬ë„ŒíŠ¸ê°€ ë§¨ ì²˜ìŒ í™”ë©´ ë Œë”ë§ë  ë–„ ì‹¤í–‰
// - (2) ë°°ì—´ ìš”ì†Œ ì•ˆì— ìˆëŠ” valueê°’ì´ ë°”ë€” ë–„ ì‹¤í–‰
// - 2ë²ˆì¨° ë°°ì—´ ìš”ì†Œë¡œ ë¹ˆ ë°°ì—´[]ì„ ì „ë‹¬í•˜ë©´, (1)ë§Œ ì‹¤í–‰ë¨
useEffect(() => {
  // ì‘ì—…
}, [value])
```

---

## 4.2 Clean Up (ì •ë¦¬ ì‘ì—…)

```jsx
useEffect(() => {
  // ì‘ì—…
  return () => {
    // ì˜ˆë¥¼ ë“¤ì–´, ë“±ë¡í•œ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•´ì£¼ëŠ” ì‘ì—…ì„ ì—¬ê¸°ì„œ í•¨
    // ì‘ì—… ì •ë¦¬
  }
}, [])
```

---

## 4.3 ì˜ˆì œ1 : useEffect ì‚¬ìš©

```jsx
import React, { useState, useEffect } from 'react'

function App() {
  const [count, setCount] = useState(1)
  const [name, setName] = useState('')

  const handleCountUpdate = () => {
    setCount(count + 1)
  }

  const handleInputChange = e => {
    setName(e.target.value)
  }

  // // ë Œë”ë§ë§ˆë‹¤ ë§¤ë²ˆ ì‹¤í–‰ - ë Œë”ë§ ì´í›„
  // useEffect(() => {
  //   console.log('ë Œë”ë§');
  // });

  // // ë§ˆìš´íŠ¸ + [count]ê°€ ë³€ê²½ë  ë–„ë§Œ useEffect ì‹¤í–‰
  // useEffect(() => {
  //   console.log('ğŸ‰count ë³€í™”');
  // }, [count]);

  // // ë§ˆìš´íŠ¸ + [name]ì´ ë³€ê²½ë  ë–„ë§Œ useEffect ì‹¤í–‰
  // useEffect(() => {
  //   console.log('ğŸŠname ë³€í™”');
  // }, [name]);

  // ë§¨ ì²˜ìŒ ë Œë”ë§ë  ë–„ë§Œ ì‹¤í–‰
  useEffect(() => {
    console.log('ë§ˆìš´íŒ…')
  }, [])

  return (
    <div>
      <button onClick={handleCountUpdate}>ì—…ë°ì´íŠ¸</button>
      <span>count : {count} </span>

      <input type="text" value={name} onChange={handleInputChange} />
      <span>name : {name}</span>
    </div>
  )
}

export default App
```

---

## 4.4 ì˜ˆì œ2 : useEffect & Clean Up

```jsx
import React, { useState, useEffect } from 'react'

function App() {
  const [showTimer, setShowTimer] = useState(false)

  return (
    <div>
      {showTimer && <Timer />}
      <button onClick={() => setShowTimer(!showTimer)}>Toggle Timer</button>
    </div>
  )
}

const Timer = props => {
  useEffect(() => {
    const timer = setInterval(() => {
      console.log('íƒ€ì´ë¨¸ ëŒì•„ê°€ëŠ”ì¤‘')
    }, 1000)

    // ì •ë¦¬ ì‘ì—…
    return () => {
      clearInterval(timer)
      console.log('íƒ€ì´ë¨¸ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.')
    }
  }, [])

  return (
    <div>
      <span>íƒ€ì´ë¨¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì½˜ì†” í™•ì¸í•˜ì„¸ìš”.</span>
    </div>
  )
}

export default App
```

---

# [ì°¸ê³ ] ê³µì‹ë¬¸ì„œ

- [Introduction to Hooks](https://reactjs.org/docs/hooks-intro.html)
- [Hooks Reference](https://reactjs.org/docs/hooks-reference.html)
