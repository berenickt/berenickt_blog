---
title: 'ìŠ¤í¬ë©í•‘ê³¼ í¬ë¡¤ë§'
date: 2024/01/19
---

# ìŠ¤í¬ë˜í•‘ê³¼ í¬ë¡¤ë§

## 1. ìŠ¤í¬ë˜í•‘

- Scraping(ìŠ¤í¬ë˜í•‘) : í•œ ë²ˆ ê°€ì ¸ì˜¤ê¸°
  - (í•œ ë²ˆ) ê¸ë‹¤
  - ë„êµ¬ : Cherrio
- Crawling(í¬ë¡¤ë§) : ê¾¸ì¤€íˆ, ì—¬ëŸ¬ ë²ˆ ê°€ì ¸ì˜¤ê¸°
  - í—¤ì—„ì¹˜ë‹¤
  - ë„êµ¬ : Puppeteer

---

### 1.1 Scraping(ìŠ¤í¬ë˜í•‘)

ìŠ¤í¬ë˜í•‘ì€ ë§ ê·¸ëŒ€ë¡œ ìŠ¤í¬ë©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì‹œìŠ¤í…œì´ë‚˜ ì›¹ì‚¬ì´íŠ¸ì— ìˆëŠ” ë°ì´í„° ì¤‘ í•„ìš”í•œ ë°ì´í„°ë§Œ ì¶”ì¶œ ë° ê°€ê³µí•˜ì—¬ ì œê³µí•˜ê²Œ ë˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

ì¦‰, ì–´ë–¤ íŠ¹ì •í•œ ì›¹ ì‚¬ì´íŠ¸ì— ê°€ì„œ ê·¸ ì‚¬ì´íŠ¸ì˜ HTMLì„ ê¸ì–´ì˜¤ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.
ê¸ì–´ì˜¨ ì •ë³´ë¥¼ ì˜ ì •ë¦¬í•´ì„œ DBì— ì €ì¥í•  ìˆ˜ ìˆê² ì£ ?

> ğŸ’¡ ì–¸ì œ ì“°ì´ë‚˜ìš”?
>
> ì¹´ì¹´ì˜¤í†¡ì´ë‚˜ ìŠ¬ë™ì„ ì‚¬ìš©í•  ë•Œ, ë§í¬ë¥¼ ê³µìœ í•˜ë©´ ë°‘ì— ìë™ìœ¼ë¡œ ì‚¬ì´íŠ¸ì˜ ì†Œê°œì™€ ì´ë¯¸ì§€ê°€ ë‚˜ì˜µë‹ˆë‹¤!
> í”„ë¡ íŠ¸ì—”ë“œë‚˜ ë°±ì—”ë“œì—ì„œ ì§ì ‘ ì‚¬ì´íŠ¸ì— ê°€ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

ê¸€ì˜ ë‚´ìš©ì— httpê°€ í¬í•¨ëœ URLì´ ìˆë‹¤ë©´, ê·¸ ì‚¬ì´íŠ¸ì— ì ‘ì†í•´ì„œ `open graph`ê°€ ìˆëŠ” ë‚´ìš©ì„ ê¸ì–´ì™€ì„œ ì €ì¥í•©ë‹ˆë‹¤.
ë‚˜ì¤‘ì— ê¸€ì˜ ìƒì„¸ë³´ê¸°ë¥¼ í•  ë•Œ, ì‚¬ì´íŠ¸ ì†Œê°œë¥¼ ê°™ì´ ë³´ì—¬ì£¼ê²Œ ë©ë‹ˆë‹¤.

ë„¤ì´ë²„ì— ë“¤ì–´ê°€ì„œ ê°œë°œì ë„êµ¬ë¥¼ ì—´ì–´ë³´ë©´,
`<head>` íƒœê·¸ ì•ˆì— `<meta>` íƒœê·¸ë“¤ì´ ìˆê³ , ê·¸ ì¤‘ì—ì„œ propertyê°€ ogë¡œ ì‹œì‘í•˜ëŠ” íƒœê·¸ë“¤ì´ ë³´ì…ë‹ˆë‹¤.

> ğŸ’¡ The Open Graph protocol?
>
> í˜ì´ìŠ¤ë¶ì—ì„œ ì‹œì‘í•´ì„œ ìœ ëª…í•´ì§„ ê²ƒìœ¼ë¡œ, ì•„ë˜ì˜ ì •ë³´ë“¤ì„ **html**ì— **head** ì•ˆì— **meta** íƒœê·¸ë¡œ ë„£ì–´ì¤ë‹ˆë‹¤.
>
> - `og:title` - The title of your object as it should appear within the graph, e.g., "The Rock".
> - `og:type` - The [type](https://ogp.me/#types) of your object, e.g., "video.movie". Depending on the type you specify, other properties may also be required.
> - `og:image` - An image URL which should represent your object within the graph.
> - `og:url` - The canonical URL of your object that will be used as its permanent ID in the graph,
>   - e.g., "https://www.imdb.com/title/tt0117500/".
>   - [ì¶œì²˜](https://ogp.me/)

---

### 1.2 í¬ë¡¤ë§

í¬ë¡¤ë§ì€ ìŠ¤í¬ë˜í•‘ì„ ì •ê¸°ì ìœ¼ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ ì—¬ëŸ¬ë²ˆí•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.
ë‹¤ë¥¸ ì‚¬ì´íŠ¸ë¥¼ í¬ë¡¤ë§í•˜ëŠ” ê²ƒì€ **ì£¼ì˜**í•´ì•¼ í•œë‹¤!

- cf. [&#39;ì—¬ê¸°ì–´ë•Œ&#39;ì˜ &#39;ì•¼ë†€ì&#39; í¬ë¡¤ë§ ë²•ì  ì´ìŠˆ](https://biz.chosun.com/topics/law_firm/2021/09/29/OOBWHWT5ZBF7DESIRKNPYIODLA/)

---

## 3. og íƒœê·¸ ìŠ¤í¬ë˜í•‘

### 3.1 cheerio

- ê³µì‹ ì‚¬ì´íŠ¸ : [cheerio](https://cheerio.js.org/)
- npm cheerio

`cheerio`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `yarn add cheerio`ë¥¼ ì„¤ì¹˜í•´ ì£¼ì„¸ìš”.
ìš°ë¦¬ê°€ ë°›ì•„ì˜¨ html ë°ì´í„°ë¥¼ cheerioì— ë„˜ê²¨ì¤ë‹ˆë‹¤.

```jsx
const $ = cheerio.load(html.data)
```

URLì˜ HTML ì½”ë“œë¥¼ ë³´ë©´ `meta` íƒœê·¸ì—ëŠ” `property`ì™€ `content` ì†ì„±ì´ ìˆìŠµë‹ˆë‹¤.

`property`ì™€ `content`ë¥¼ ê±¸ëŸ¬ë‚´ê¸° ìœ„í•œ ì½”ë“œë¥¼ ì¶”ê°€í•´ ì£¼ì„¸ìš”.

```jsx
import axios from 'axios'
import cheerio from 'cheerio'

const createMessage = async () => {
  // ì…ë ¥ëœ ë©”ì‹œì§€: "ì•ˆë…•í•˜ì„¸ìš”~ https://www.naver.com ì— ë°©ë¬¸í•´ ì£¼ì„¸ìš”!"

  // 1. ì…ë ¥ëœ ë©”ì‹œì§€ì—ì„œ httpë¡œ ì‹œì‘í•˜ëŠ” ë¬¸ì¥ì´ ìˆëŠ”ì§€ ë¨¼ì € ì°¾ê¸°!(.find() ë“±ì˜ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©í•˜ê¸°)
  const url = 'https://www.daum.net'

  // 2. axios.getìœ¼ë¡œ ìš”ì²­í•´ì„œ htmlì½”ë“œ ë°›ì•„ì˜¤ê¸° => ìŠ¤í¬ë˜í•‘
  const result = await axios.get(url)
  console.log(result.data)

  // 3. ìŠ¤í¬ë˜í•‘ ê²°ê³¼(result)ì—ì„œ OG(ì˜¤í”ˆê·¸ë˜í”„) ì½”ë“œ ê³¨ë¼ë‚´ì„œ ë³€ìˆ˜ì— ì €ì¥í•˜ê¸°
  const $ = cheerio.load(result.data)
  $('meta').each((index, element) => {
    if ($(element).attr('property') && $(element).attr('property').includes('og:')) {
      const key = $(element).attr('property') // og:title, og:description, ...
      const value = $(element).attr('content') // ë„¤ì´ë²„, ë„¤ì´ë²„ ë©”ì¸ì—ì„œ ~~~
      console.log(key, value)
    }
  })
}

createMessage()
```

- cf. [attr í•¨ìˆ˜](https://cheerio.js.org/classes/Cheerio.html#attr)
- cf. [each í•¨ìˆ˜](https://cheerio.js.org/classes/Cheerio.html#each)
