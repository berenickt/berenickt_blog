---
title: '44-Deploy'
date: 2023/12/25
---

## 1. AWS

### 1.1 EC2

EC2(ELASTIC COMPUTE CLOUD)는 AWS에서 제공하는 클라우드 기반 가상 서버로, 사용자가 필요로 하는 컴퓨팅 리소스를 탄력적 으로 제공하는 서비스

- `다양한 인스턴스 유형`: 일반 목적, 컴퓨팅 최적화, 메모리 최적화 등 다양한 용도의 인스턴스 제공.
- `확장성`: 수요에 따라 인스턴스 수를 늘리거나 줄일 수 있어 비용 효율적 운영 가능.
- `제어 및 관리`: 운영 체제, 네트워크 설정, 보안 등 서버 환경을 세부적으로 구성 가능

---

### 1.2 RDS

RDS(Relational Database Service)는 클라우드에서 관계형 데이터베이스를 손쉽게 설정, 운영 및 확장할 수 있도록 지원하는 관리형 서비스

- `지원 데이터베이스 엔진`: Amazon Aurora, PostgreSQL, MySQL, MariaDB, Oracle Database, SQL Server
- `자동화된 관리`: 백업, 패치, 복구 등 데이터베이스 관리 작업 자동화.
- `고가용성 및 확장성`: 멀티 AZ 배포 및 읽기 복제본을 통해 높은 가용성과 읽기 성능 향상.
- `보안`: VPC 내에서의 격리, IAM과 통합된 액세스 제어, 데이터 암호화 지원

---

### 1.3 VPC

\VPC(Virtual Private Cloud는 AWS 클라우드 내에 사용자가 정의한 가상 네트워크를 생성하여 리소스를 배포할 수 있게 해주는 서비스

- `네트워크 구성 제어`: IP 주소 범위, 서브넷, 라우팅 테이블 등을 직접 설정 가능.
- `보안 제어`: 보안 그룹과 네트워크 ACL을 통해 인바운드 및 아웃바운드 트래픽 제어.
- `하이브리드 연결`: 온프레미스 네트워크와 VPN이나 Direct Connect를 통해 연결 가능

---

### 1.4 ELB

ELB(Elastic Load Balancer)는 들어오는 트래픽을 여러 대상(e.g. EC2 인스턴스)으로 자동 분산시켜 애플리케이션의 가용성과 확장성을 향상시키는 서비스

- `Application Load Balancer`: HTTP/HTTPS 트래픽에 대한 레이어 7 로드 밸런싱.
- `Network Load Balancer`: 고성능 TCP 트래픽에 대한 레이어 4 로드 밸런싱.
- `Gateway Load Balancer`: 서드파티 가상 어플라이언스와의 통합을 위한 로드 밸런싱.
- `자동 확장 지원`: 트래픽 변화에 따른 자동 확장 및 축소.
- `헬스 체크`: 대상의 상태를 모니터링하여 비정상적인 인스턴스를 자동으로 제외

---

### 1.5 Route 53

Route 53은 확장성과 가용성이 높은 클라우드 DNS(도메인 네임 시스템) 웹 서비스

- `도메인 등록`: 새로운 도메인 이름 등록 및 관리.
- `DNS 라우팅`: 지연 시간 기반, 가중치 기반, 지리 위치 기반 등 다양한 라우팅 정책 지원.
- `헬스 체크 및 모니터링`: 엔드포인트의 가용성을 확인하고 비정상 시 트래픽을 대체 리소스로 라우팅

---

### 1.6 EB

Elastic Beanstalk(EB)는 애플리케이션 배포를 단순화하는 관리형 서비스로, 개발자는 코드만 업로드하면 자동으로 인프라 프로비저닝, 로드 밸런싱, 스케일링 등을 처리

- `자동화된 관리`: 서버 설정, 환경 구성, 모니터링 등을 자동으로 처리.
- `커스터마이징 가능`: 필요에 따라 구성 설정을 세부적으로 조정 가능.
- `배포 옵션`: 롤링 업데이트, 블루/그린 배포 등 다양한 배포 전략 지원

---

### 1.7 Lightsail

Lightsail은 소규모 프로젝트나 간단한 웹 애플리케이션을 빠르게 시작할 수 있도록 도와주는 서비스로,
가상 서버, 스토리지, 데이터 전송 등을 하나의 패키지로 제공

- `간단한 사용법`: 복잡한 설정 없이 몇 번의 클릭만으로 리소스 생성 가능.
- `예측 가능한 비용`: 월별 고정 요금제로 비용 관리 용이.
- `사전 구성된 템플릿`: WordPress, LAMP, MEAN 등 인기 있는 애플리케이션 스택 제공

---

### 1.8 IAM

IAM(Identity Access Management)은 AWS 리소스에 대한 액세스를 안전하게 제어할 수 있도록 하는 서비스로, 사용자 및 그룹의 권한을 관리

- `사용자 및 그룹 관리`: AWS 계정 내에서 개별 사용자 생성 및 그룹화.
- `권한 제어`: 세부적인 권한 정책을 통해 리소스에 대한 접근 제어.
- `다단계 인증(MFA)`: 추가적인 보안 계층을 위한 MFA 설정 가능

---

### 1.9 S3

S3(Simple Storage Service)는 확장성이 뛰어난 객체 스토리지 서비스로, 대용량 데이터를 안전하고 저렴하게 저장 및 검색 가능

- `높은 내구성 및 가용성`: 데이터를 여러 시설에 중복 저장하여 99.999999999%의 가용성 제공.
- `다양한 스토리지 클래스`: 접근 빈도와 비용에 따라 S3 Standard, S3 Intelligent-Tiering, S3 Glacier 등 선택 가능.
- `보안 및 액세스 제어`: 버킷 정책, ACL, IAM과 연동하여 세부적인 접근 권한 관리.
- `라이프사이클 관리`: 객체의 저장 기간에 따른 자동 이동 또는 삭제 정책 설정 가능

---

## 2. 배포

배포 : 개발된 소프트웨어를 사용자나 클라이언트 가 사용 할 수 있도록 환경에 배포하는 것

### 2.1 배포의 핵심 요소

- 안전성 : 시스템의 안정적인 운영 보장
- 확장성 : 사용자 증가에 따른 시스템 확장 용이성
- 효율성 : 자원 활용의 최적화 및 비용 절감

---

### 2.2 배포 전략의 필요성

- `신속한 업데이트와 버그 수정` : 버그가 없는 프로그램은 존재하지 않는다. 발견 즉시 수정하여 리텐션을 늘린다
- `사용자 경험 향상 및 서비스 개선` : 사용자의 니즈는 지속적으로 변화한다. 빠른 업데이트를 통해 니즈를 반영한다

---

### 2.3 배포 방식의 진화

- `On Premise Server`
  - 기업에서 직접 서버 하드웨어를 구매하고 인프라 구축
  - 초기 투자 비용이 높고 유지보수 자원이 많이 필요
  - 서버 증설시 하드웨어 추가 구매 및 설치 필요
  - 잉여 인프라 발생 가능성
  - 빠르고 유연한 변화 대처 불가능
- `Cloud Server`
  - AWS, Azure, Google Cloud Platform 클라우드 서비스 이용
  - 필요한 자원을 온디맨드(on demand)로 사용
  - 비용 최적화 (논란의 여지 있음)
  - 유연한 확장성
  - 고가용성 (다양한 지역에 데이터 분산)
  - 인프라 관리 부담 최소화

---

### 2.4 로컬과 클라우드 배포 환경

```bash
# 로컬 개발 환경
          ------- 컴퓨터(localhost) ---
클라이언트 → | NestJS  --->  Postgresql |
          |         <---             |
          ----------------------------


# 클라우드 배포 환경
          --REST API 서버--       -- 데이터베이스 서버 --
클라이언트 → |    NestJS    | --->  |   Postgresql   |
          |              | <---  |                |
          ----------------       ------------------
```

---

### 2.5 분리 배포의 장점

- `확장성` : 서비스 구성 요소별 독립적인 스케일링 가능, 자원 사용 최적화로 비용 효율 상승
- `관리용이` : 문제 발생시 영향 범위 최소화
- `보안성` : 네트워크 계층에서의 접근 제어로 보안 강화. 민감한 데이터에 대한 접근 권한 세분화
- `마이크로서비스 아키텍처` : 분리된 도메인간 독립적인 개발 및 배포 가능
